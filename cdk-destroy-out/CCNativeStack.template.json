{
 "Resources": {
  "EvidenceLedgerBucket3A5BFB25": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "cc-native-evidence-ledger-661268174397-us-west-2",
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/EvidenceLedgerBucket/Resource"
   }
  },
  "EvidenceLedgerBucketPolicyE4997D34": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "EvidenceLedgerBucket3A5BFB25"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "EvidenceLedgerBucket3A5BFB25",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "EvidenceLedgerBucket3A5BFB25",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/EvidenceLedgerBucket/Policy/Resource"
   }
  },
  "WorldStateSnapshotsBucket7B77A435": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "cc-native-world-state-snapshots-661268174397-us-west-2",
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/WorldStateSnapshotsBucket/Resource"
   }
  },
  "WorldStateSnapshotsBucketPolicy37D77781": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "WorldStateSnapshotsBucket7B77A435"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "WorldStateSnapshotsBucket7B77A435",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "WorldStateSnapshotsBucket7B77A435",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/WorldStateSnapshotsBucket/Policy/Resource"
   }
  },
  "SchemaRegistryBucketAD895CE8": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "cc-native-schema-registry-661268174397-us-west-2",
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SchemaRegistryBucket/Resource"
   }
  },
  "SchemaRegistryBucketPolicyF79BCF0C": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "SchemaRegistryBucketAD895CE8"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "SchemaRegistryBucketAD895CE8",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SchemaRegistryBucketAD895CE8",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SchemaRegistryBucket/Policy/Resource"
   }
  },
  "ArtifactsBucket2AAC5544": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "cc-native-artifacts-661268174397-us-west-2",
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ArtifactsBucket/Resource"
   }
  },
  "ArtifactsBucketPolicy852CB646": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "ArtifactsBucket2AAC5544"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "ArtifactsBucket2AAC5544",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ArtifactsBucket2AAC5544",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ArtifactsBucket/Policy/Resource"
   }
  },
  "LedgerArchivesBucket5FE74194": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "BucketName": "cc-native-ledger-archives-661268174397-us-west-2",
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/LedgerArchivesBucket/Resource"
   }
  },
  "LedgerArchivesBucketPolicy042BE1F6": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "LedgerArchivesBucket5FE74194"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "LedgerArchivesBucket5FE74194",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerArchivesBucket5FE74194",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/LedgerArchivesBucket/Policy/Resource"
   }
  },
  "WorldStateTableD92FBF82": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "entityType-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-world-state"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/WorldStateTable/Resource"
   }
  },
  "EvidenceIndexTableCC0C8C88": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "entityType-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-evidence-index"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/EvidenceIndexTable/Resource"
   }
  },
  "SnapshotsIndexTable28F25CBB": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "entityType-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-snapshots-index"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SnapshotsIndexTable/Resource"
   }
  },
  "SchemaRegistryTableD1184F6E": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-schema-registry"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SchemaRegistryTable/Resource"
   }
  },
  "CriticalFieldRegistryTable5513C5F7": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-critical-field-registry"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/CriticalFieldRegistryTable/Resource"
   }
  },
  "AccountsTable81C15AE5": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenantId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "accountId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "tenantId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "accountId",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-accounts"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AccountsTable/Resource"
   }
  },
  "SignalsTableE8D63F6D": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenantId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "signalId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "accountId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "timestamp",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "accountId-index",
      "KeySchema": [
       {
        "AttributeName": "accountId",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "timestamp",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "tenantId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "signalId",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-signals"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SignalsTable/Resource"
   }
  },
  "ToolRunsTableEF3E8A61": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "traceId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "toolRunId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "traceId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "toolRunId",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-tool-runs"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ToolRunsTable/Resource"
   }
  },
  "ApprovalRequestsTableEACE774C": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenantId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "requestId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "tenantId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "requestId",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-approval-requests"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ApprovalRequestsTable/Resource"
   }
  },
  "ActionQueueTable5BA20E48": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenantId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "actionId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "tenantId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "actionId",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-action-queue"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ActionQueueTable/Resource"
   }
  },
  "PolicyConfigTableE9468135": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenantId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "policyId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "tenantId",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "policyId",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-policy-config"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PolicyConfigTable/Resource"
   }
  },
  "LedgerTable38A58B60": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi2pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi2sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "gsi1-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "gsi2-index",
      "KeySchema": [
       {
        "AttributeName": "gsi2pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi2sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-ledger"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/LedgerTable/Resource"
   }
  },
  "CacheTableC1E6DF7E": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "cacheKey",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "cacheKey",
      "KeyType": "HASH"
     }
    ],
    "TableName": "cc-native-cache",
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/CacheTable/Resource"
   }
  },
  "TenantsTableB701DC57": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "tenantId",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "tenantId",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-tenants"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/TenantsTable/Resource"
   }
  },
  "MethodologyTable8F16BBDE": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "tenant-status-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-methodology"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/MethodologyTable/Resource"
   }
  },
  "AssessmentTable25EB317A": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "opportunity-methodology-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-assessment"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AssessmentTable/Resource"
   }
  },
  "IdentitiesTableCD62DAD4": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "tenant-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-identities"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/IdentitiesTable/Resource"
   }
  },
  "DecisionBudgetTable24B12A3D": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-decision-budget"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionBudgetTable/Resource"
   }
  },
  "ActionIntentTable72DEAEAE": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "action_intent_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "account_id",
      "AttributeType": "S"
     },
     {
      "AttributeName": "approval_timestamp",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "action-intent-id-index",
      "KeySchema": [
       {
        "AttributeName": "action_intent_id",
        "KeyType": "HASH"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "account-index",
      "KeySchema": [
       {
        "AttributeName": "account_id",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "approval_timestamp",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-action-intent",
    "TimeToLiveSpecification": {
     "AttributeName": "expires_at_epoch",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ActionIntentTable/Resource"
   }
  },
  "DecisionProposalTable5A1A6F51": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "decision_id",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "decision-id-index",
      "KeySchema": [
       {
        "AttributeName": "decision_id",
        "KeyType": "HASH"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-decision-proposal"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionProposalTable/Resource"
   }
  },
  "CCNativeEventBus892049F2": {
   "Type": "AWS::Events::EventBus",
   "Properties": {
    "Name": "cc-native-events"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/CCNativeEventBus/Resource"
   }
  },
  "TenantEncryptionKey1880BF35": {
   "Type": "AWS::KMS::Key",
   "Properties": {
    "Description": "KMS key for tenant data encryption",
    "EnableKeyRotation": true,
    "KeyPolicy": {
     "Statement": [
      {
       "Action": "kms:*",
       "Effect": "Allow",
       "Principal": {
        "AWS": "arn:aws:iam::661268174397:root"
       },
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/TenantEncryptionKey/Resource"
   }
  },
  "AgentRoleF4A42D6B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": [
         "bedrock.amazonaws.com",
         "lambda.amazonaws.com"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Read-only IAM role for autonomous agents (World Model read access only)",
    "RoleName": "cc-native-agent-role"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AgentRole/Resource"
   }
  },
  "AgentRoleDefaultPolicy1027F5D2": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Condition": {
        "StringEquals": {
         "dynamodb:ReadConsistency": "eventual"
        }
       },
       "Effect": "Allow",
       "Resource": "arn:aws:dynamodb:us-west-2:661268174397:table/cc-native-*"
      },
      {
       "Action": "s3:GetObject",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:s3:::",
           {
            "Ref": "EvidenceLedgerBucket3A5BFB25"
           },
           "/evidence/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:s3:::",
           {
            "Ref": "WorldStateSnapshotsBucket7B77A435"
           },
           "/snapshots/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "s3:DeleteObject",
        "s3:PutObject",
        "s3:PutObjectAcl"
       ],
       "Effect": "Deny",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AgentRoleDefaultPolicy1027F5D2",
    "Roles": [
     {
      "Ref": "AgentRoleF4A42D6B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AgentRole/DefaultPolicy/Resource"
   }
  },
  "UserPool6BA7E5F2": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": true
    },
    "AutoVerifiedAttributes": [
     "email"
    ],
    "EmailVerificationMessage": "The verification code to your new account is {####}",
    "EmailVerificationSubject": "Verify your new account",
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 12,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": true,
      "RequireUppercase": true
     }
    },
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolName": "cc-native-users",
    "UsernameAttributes": [
     "email"
    ],
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "The verification code to your new account is {####}",
     "EmailSubject": "Verify your new account",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/UserPool/Resource"
   }
  },
  "UserPoolWebClient4C9370B0": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AllowedOAuthFlows": [
     "implicit",
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "profile",
     "phone",
     "email",
     "openid",
     "aws.cognito.signin.user.admin"
    ],
    "CallbackURLs": [
     "https://example.com"
    ],
    "ClientName": "cc-native-web-client",
    "ExplicitAuthFlows": [
     "ALLOW_USER_PASSWORD_AUTH",
     "ALLOW_ADMIN_USER_PASSWORD_AUTH",
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "GenerateSecret": false,
    "PreventUserExistenceErrors": "ENABLED",
    "SupportedIdentityProviders": [
     "COGNITO"
    ],
    "UserPoolId": {
     "Ref": "UserPool6BA7E5F2"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/UserPool/WebClient/Resource"
   }
  },
  "NeptuneInfrastructureCCNativeVpc9CABA391": {
   "Type": "AWS::EC2::VPC",
   "Properties": {
    "CidrBlock": "10.0.0.0/16",
    "EnableDnsHostnames": true,
    "EnableDnsSupport": true,
    "InstanceTenancy": "default",
    "Tags": [
     {
      "Key": "Name",
      "Value": "cc-native-vpc"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/Resource"
   }
  },
  "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-west-2a",
    "CidrBlock": "10.0.0.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "NeptuneIsolated"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Isolated"
     },
     {
      "Key": "Name",
      "Value": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet1/Subnet"
   }
  },
  "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTable23335C61": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet1/RouteTable"
   }
  },
  "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTableAssociation9F6FC58C": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTable23335C61"
    },
    "SubnetId": {
     "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet1/RouteTableAssociation"
   }
  },
  "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": "us-west-2b",
    "CidrBlock": "10.0.1.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "NeptuneIsolated"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Isolated"
     },
     {
      "Key": "Name",
      "Value": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet2/Subnet"
   }
  },
  "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTable41D2F6EF": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet2/RouteTable"
   }
  },
  "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTableAssociationB0458231": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTable41D2F6EF"
    },
    "SubnetId": {
     "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/NeptuneIsolatedSubnet2/RouteTableAssociation"
   }
  },
  "NeptuneInfrastructureCCNativeVpcRestrictDefaultSecurityGroupCustomResource617E4544": {
   "Type": "Custom::VpcRestrictDefaultSG",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomVpcRestrictDefaultSGCustomResourceProviderHandlerDC833E5E",
      "Arn"
     ]
    },
    "DefaultSecurityGroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureCCNativeVpc9CABA391",
      "DefaultSecurityGroup"
     ]
    },
    "Account": "661268174397"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CCNativeVpc/RestrictDefaultSecurityGroupCustomResource/Default"
   }
  },
  "VPCFlowLogGroup": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/aws/vpc/cc-native-flow-logs",
    "RetentionInDays": 30
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/VPCFlowLogGroup/Resource"
   }
  },
  "NeptuneInfrastructureVPCFlowLogRole52BBBE1D": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "vpc-flow-logs.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "IAM role for VPC Flow Logs"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/VPCFlowLogRole/Resource"
   }
  },
  "NeptuneInfrastructureVPCFlowLogRoleDefaultPolicy402D435E": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:DescribeLogGroups",
        "logs:DescribeLogStreams",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "VPCFlowLogGroup",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "NeptuneInfrastructureVPCFlowLogRoleDefaultPolicy402D435E",
    "Roles": [
     {
      "Ref": "NeptuneInfrastructureVPCFlowLogRole52BBBE1D"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/VPCFlowLogRole/DefaultPolicy/Resource"
   }
  },
  "NeptuneInfrastructureVPCFlowLogE91936D4": {
   "Type": "AWS::EC2::FlowLog",
   "Properties": {
    "DeliverLogsPermissionArn": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureVPCFlowLogRole52BBBE1D",
      "Arn"
     ]
    },
    "LogDestinationType": "cloud-watch-logs",
    "LogGroupName": {
     "Ref": "VPCFlowLogGroup"
    },
    "ResourceId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    },
    "ResourceType": "VPC",
    "Tags": [
     {
      "Key": "Name",
      "Value": "CCNativeStack/NeptuneInfrastructure/VPCFlowLog"
     }
    ],
    "TrafficType": "ALL"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/VPCFlowLog/FlowLog"
   }
  },
  "NeptuneAuditLogGroup": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "LogGroupName": "/aws/neptune/cluster/cc-native-neptune-cluster/audit",
    "RetentionInDays": 30
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneAuditLogGroup/Resource"
   }
  },
  "NeptuneInfrastructureNeptuneLogsRole6C0E7822": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "rds.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "IAM role for Neptune to write audit logs to CloudWatch"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneLogsRole/Resource"
   }
  },
  "NeptuneInfrastructureNeptuneLogsRoleDefaultPolicyB8D02316": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:DescribeLogStreams",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "NeptuneAuditLogGroup",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "NeptuneInfrastructureNeptuneLogsRoleDefaultPolicyB8D02316",
    "Roles": [
     {
      "Ref": "NeptuneInfrastructureNeptuneLogsRole6C0E7822"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneLogsRole/DefaultPolicy/Resource"
   }
  },
  "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for Neptune cluster (VPC-only access)",
    "SecurityGroupEgress": [
     {
      "CidrIp": "255.255.255.255/32",
      "Description": "Disallow all traffic",
      "FromPort": 252,
      "IpProtocol": "icmp",
      "ToPort": 86
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneSecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureNeptuneSecurityGroupfromCCNativeStackNeptuneInfrastructureGraphMaterializerSecurityGroup2826C302818277890D32": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow Gremlin connections from graph-materializer Lambda",
    "FromPort": 8182,
    "GroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureGraphMaterializerSecurityGroupE324FDAD",
      "GroupId"
     ]
    },
    "ToPort": 8182
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneSecurityGroup/from CCNativeStackNeptuneInfrastructureGraphMaterializerSecurityGroup2826C302:8182"
   }
  },
  "NeptuneInfrastructureNeptuneSecurityGroupfromCCNativeStackNeptuneInfrastructureSynthesisEngineSecurityGroup3BB6D47F8182C918F650": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow Gremlin connections from synthesis-engine Lambda",
    "FromPort": 8182,
    "GroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureSynthesisEngineSecurityGroup862BB426",
      "GroupId"
     ]
    },
    "ToPort": 8182
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneSecurityGroup/from CCNativeStackNeptuneInfrastructureSynthesisEngineSecurityGroup3BB6D47F:8182"
   }
  },
  "NeptuneInfrastructureNeptuneSecurityGroupfromCCNativeStackDecisionInfrastructureDecisionEvaluationSecurityGroup56ACEE378182D5CF84D1": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow decision evaluation handler to connect to Neptune",
    "FromPort": 8182,
    "GroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionEvaluationSecurityGroup0DDCFEF6",
      "GroupId"
     ]
    },
    "ToPort": 8182
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneSecurityGroup/from CCNativeStackDecisionInfrastructureDecisionEvaluationSecurityGroup56ACEE37:8182"
   }
  },
  "NeptuneInfrastructureGraphMaterializerSecurityGroupE324FDAD": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for graph-materializer Lambda function",
    "SecurityGroupEgress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": "Allow HTTPS to AWS services via VPC endpoints (DynamoDB, EventBridge, CloudWatch Logs)",
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/GraphMaterializerSecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureGraphMaterializerSecurityGrouptoCCNativeStackNeptuneInfrastructureNeptuneSecurityGroup570D658A81821AAE957F": {
   "Type": "AWS::EC2::SecurityGroupEgress",
   "Properties": {
    "Description": "Allow Gremlin connections to Neptune",
    "DestinationSecurityGroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150",
      "GroupId"
     ]
    },
    "FromPort": 8182,
    "GroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureGraphMaterializerSecurityGroupE324FDAD",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "ToPort": 8182
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/GraphMaterializerSecurityGroup/to CCNativeStackNeptuneInfrastructureNeptuneSecurityGroup570D658A:8182"
   }
  },
  "NeptuneInfrastructureSynthesisEngineSecurityGroup862BB426": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for synthesis-engine Lambda function",
    "SecurityGroupEgress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": "Allow HTTPS to AWS services via VPC endpoints (DynamoDB, EventBridge, CloudWatch Logs)",
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/SynthesisEngineSecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureSynthesisEngineSecurityGrouptoCCNativeStackNeptuneInfrastructureNeptuneSecurityGroup570D658A8182B1C69328": {
   "Type": "AWS::EC2::SecurityGroupEgress",
   "Properties": {
    "Description": "Allow Gremlin connections to Neptune",
    "DestinationSecurityGroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150",
      "GroupId"
     ]
    },
    "FromPort": 8182,
    "GroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureSynthesisEngineSecurityGroup862BB426",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "ToPort": 8182
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/SynthesisEngineSecurityGroup/to CCNativeStackNeptuneInfrastructureNeptuneSecurityGroup570D658A:8182"
   }
  },
  "NeptuneInfrastructureNeptuneSubnetGroup829B75F7": {
   "Type": "AWS::Neptune::DBSubnetGroup",
   "Properties": {
    "DBSubnetGroupDescription": "Subnet group for Neptune cluster",
    "DBSubnetGroupName": "cc-native-neptune-subnet-group",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "Tags": [
     {
      "Key": "Name",
      "Value": "cc-native-neptune-subnet-group"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneSubnetGroup"
   }
  },
  "NeptuneInfrastructureNeptuneParameterGroupB1C5FC2E": {
   "Type": "AWS::Neptune::DBClusterParameterGroup",
   "Properties": {
    "Description": "Parameter group for Neptune cluster",
    "Family": "neptune1.4",
    "Parameters": {
     "neptune_query_timeout": "120000",
     "neptune_enable_audit_log": "1"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneParameterGroup"
   }
  },
  "NeptuneInfrastructureNeptuneCluster6F50D8EC": {
   "Type": "AWS::Neptune::DBCluster",
   "Properties": {
    "BackupRetentionPeriod": 7,
    "DBClusterIdentifier": "cc-native-neptune-cluster",
    "DBClusterParameterGroupName": {
     "Ref": "NeptuneInfrastructureNeptuneParameterGroupB1C5FC2E"
    },
    "DBSubnetGroupName": {
     "Ref": "NeptuneInfrastructureNeptuneSubnetGroup829B75F7"
    },
    "DeletionProtection": false,
    "EnableCloudwatchLogsExports": [
     "audit"
    ],
    "IamAuthEnabled": true,
    "PreferredBackupWindow": "03:00-04:00",
    "PreferredMaintenanceWindow": "sun:04:00-sun:05:00",
    "StorageEncrypted": true,
    "Tags": [
     {
      "Key": "Name",
      "Value": "cc-native-neptune-cluster"
     }
    ],
    "VpcSecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150",
       "GroupId"
      ]
     }
    ]
   },
   "DependsOn": [
    "NeptuneAuditLogGroup"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneCluster"
   }
  },
  "NeptuneInfrastructureNeptuneInstance4C2DEC15": {
   "Type": "AWS::Neptune::DBInstance",
   "Properties": {
    "DBClusterIdentifier": {
     "Ref": "NeptuneInfrastructureNeptuneCluster6F50D8EC"
    },
    "DBInstanceClass": "db.r5.large",
    "DBInstanceIdentifier": "cc-native-neptune-instance",
    "DBSubnetGroupName": {
     "Ref": "NeptuneInfrastructureNeptuneSubnetGroup829B75F7"
    },
    "PubliclyAccessible": false,
    "Tags": [
     {
      "Key": "Name",
      "Value": "cc-native-neptune-instance"
     }
    ]
   },
   "DependsOn": [
    "NeptuneInfrastructureNeptuneCluster6F50D8EC"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneInstance"
   }
  },
  "NeptuneInfrastructureNeptuneAccessRole3BE029B3": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "IAM role for Lambda functions to access Neptune cluster",
    "RoleName": "cc-native-neptune-access-role"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneAccessRole/Resource"
   }
  },
  "NeptuneInfrastructureNeptuneAccessRoleDefaultPolicy70BE82DD": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "neptune-db:ReadDataViaQuery",
        "neptune-db:WriteDataViaQuery",
        "neptune-db:connect"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:neptune-db:us-west-2:661268174397:",
          {
           "Ref": "NeptuneInfrastructureNeptuneCluster6F50D8EC"
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "NeptuneInfrastructureNeptuneAccessRoleDefaultPolicy70BE82DD",
    "Roles": [
     {
      "Ref": "NeptuneInfrastructureNeptuneAccessRole3BE029B3"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/NeptuneAccessRole/DefaultPolicy/Resource"
   }
  },
  "NeptuneInfrastructureSSMEndpointSecurityGroup5899AF6F": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/SSMEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/SSMEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureSSMEndpoint4E59F374": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureSSMEndpointSecurityGroup5899AF6F",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.ssm",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/SSMEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureSSMMessagesEndpointSecurityGroup8DF937A8": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/SSMMessagesEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/SSMMessagesEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureSSMMessagesEndpointDC0D55D0": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureSSMMessagesEndpointSecurityGroup8DF937A8",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.ssmmessages",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/SSMMessagesEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureEC2MessagesEndpointSecurityGroupDE1907F7": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/EC2MessagesEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/EC2MessagesEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureEC2MessagesEndpoint7625F63B": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureEC2MessagesEndpointSecurityGroupDE1907F7",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.ec2messages",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/EC2MessagesEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureS3Endpoint8E3AD8A7": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "RouteTableIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTable23335C61"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTable41D2F6EF"
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".s3"
      ]
     ]
    },
    "VpcEndpointType": "Gateway",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/S3Endpoint/Resource"
   }
  },
  "NeptuneInfrastructureDynamoDBEndpoint4D439FBD": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "RouteTableIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTable23335C61"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTable41D2F6EF"
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".dynamodb"
      ]
     ]
    },
    "VpcEndpointType": "Gateway",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/DynamoDBEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureEventBridgeEndpointSecurityGroup4236C4D5": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/EventBridgeEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/EventBridgeEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureEventBridgeEndpoint7FA73CBF": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureEventBridgeEndpointSecurityGroup4236C4D5",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.events",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/EventBridgeEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureCloudWatchLogsEndpointSecurityGroupF0AB1F65": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/CloudWatchLogsEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CloudWatchLogsEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureCloudWatchLogsEndpoint6ED07965": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureCloudWatchLogsEndpointSecurityGroupF0AB1F65",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.logs",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CloudWatchLogsEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureSTSEndpointSecurityGroup666BFA17": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/STSEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/STSEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureSTSEndpointC7DDAEEB": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureSTSEndpointSecurityGroup666BFA17",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.sts",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/STSEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureCloudFormationEndpointSecurityGroup12F5A4E1": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/CloudFormationEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CloudFormationEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureCloudFormationEndpoint44681D32": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureCloudFormationEndpointSecurityGroup12F5A4E1",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.cloudformation",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/CloudFormationEndpoint/Resource"
   }
  },
  "NeptuneInfrastructureBedrockRuntimeEndpointSecurityGroup12694BD3": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CCNativeStack/NeptuneInfrastructure/BedrockRuntimeEndpoint/SecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "SecurityGroupIngress": [
     {
      "CidrIp": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureCCNativeVpc9CABA391",
        "CidrBlock"
       ]
      },
      "Description": {
       "Fn::Join": [
        "",
        [
         "from ",
         {
          "Fn::GetAtt": [
           "NeptuneInfrastructureCCNativeVpc9CABA391",
           "CidrBlock"
          ]
         },
         ":443"
        ]
       ]
      },
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/BedrockRuntimeEndpoint/SecurityGroup/Resource"
   }
  },
  "NeptuneInfrastructureBedrockRuntimeEndpointF1DA8A0E": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PrivateDnsEnabled": true,
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "NeptuneInfrastructureBedrockRuntimeEndpointSecurityGroup12694BD3",
       "GroupId"
      ]
     }
    ],
    "ServiceName": "com.amazonaws.us-west-2.bedrock-runtime",
    "SubnetIds": [
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
     },
     {
      "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
     }
    ],
    "VpcEndpointType": "Interface",
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/NeptuneInfrastructure/BedrockRuntimeEndpoint/Resource"
   }
  },
  "CustomVpcRestrictDefaultSGCustomResourceProviderRole26592FE0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ],
    "Policies": [
     {
      "PolicyName": "Inline",
      "PolicyDocument": {
       "Version": "2012-10-17",
       "Statement": [
        {
         "Effect": "Allow",
         "Action": [
          "ec2:AuthorizeSecurityGroupIngress",
          "ec2:AuthorizeSecurityGroupEgress",
          "ec2:RevokeSecurityGroupIngress",
          "ec2:RevokeSecurityGroupEgress"
         ],
         "Resource": [
          {
           "Fn::Join": [
            "",
            [
             "arn:aws:ec2:us-west-2:661268174397:security-group/",
             {
              "Fn::GetAtt": [
               "NeptuneInfrastructureCCNativeVpc9CABA391",
               "DefaultSecurityGroup"
              ]
             }
            ]
           ]
          }
         ]
        }
       ]
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Role"
   }
  },
  "CustomVpcRestrictDefaultSGCustomResourceProviderHandlerDC833E5E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "7fa1e366ee8a9ded01fc355f704cff92bfd179574e6f9cfee800a3541df1b200.zip"
    },
    "Timeout": 900,
    "MemorySize": 128,
    "Handler": "__entrypoint__.handler",
    "Role": {
     "Fn::GetAtt": [
      "CustomVpcRestrictDefaultSGCustomResourceProviderRole26592FE0",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Description": "Lambda function for removing all inbound/outbound rules from the VPC default security group"
   },
   "DependsOn": [
    "CustomVpcRestrictDefaultSGCustomResourceProviderRole26592FE0"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/Custom::VpcRestrictDefaultSGCustomResourceProvider/Handler",
    "aws:asset:path": "asset.7fa1e366ee8a9ded01fc355f704cff92bfd179574e6f9cfee800a3541df1b200",
    "aws:asset:property": "Code"
   }
  },
  "AccountPostureStateTable": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "gsi1sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "tenant-posture-index",
      "KeySchema": [
       {
        "AttributeName": "gsi1pk",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "gsi1sk",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-account-posture-state"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/AccountPostureStateTable/Resource"
   }
  },
  "GraphMaterializationStatusTable": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-graph-materialization-status"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializationStatusTable/Resource"
   }
  },
  "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "cc-native-graph-materializer-handler-dlq"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializerDlq/Resource"
   }
  },
  "GraphIntelligenceHandlersGraphMaterializerDlqPolicy9E1EF859": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Condition": {
        "ArnEquals": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "GraphIntelligenceHandlersSignalDetectedToGraphMaterializerRule1A475BC7",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E",
         "Arn"
        ]
       },
       "Sid": "AllowEventRuleCCNativeStackGraphIntelligenceHandlersSignalDetectedToGraphMaterializerRuleA355D2E1"
      },
      {
       "Action": "sqs:SendMessage",
       "Condition": {
        "ArnEquals": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "GraphIntelligenceHandlersSignalCreatedToGraphMaterializerRule3158BF8B",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E",
         "Arn"
        ]
       },
       "Sid": "AllowEventRuleCCNativeStackGraphIntelligenceHandlersSignalCreatedToGraphMaterializerRule4CD164C4"
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializerDlq/Policy/Resource"
   }
  },
  "GraphIntelligenceHandlersSynthesisEngineDlq0BCDE437": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "cc-native-synthesis-engine-handler-dlq"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SynthesisEngineDlq/Resource"
   }
  },
  "GraphIntelligenceHandlersSynthesisEngineDlqPolicy0E00FC4C": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Condition": {
        "ArnEquals": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "GraphIntelligenceHandlersGraphMaterializedToSynthesisRule94B777F4",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersSynthesisEngineDlq0BCDE437",
         "Arn"
        ]
       },
       "Sid": "AllowEventRuleCCNativeStackGraphIntelligenceHandlersGraphMaterializedToSynthesisRuleA5CA9D5C"
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "GraphIntelligenceHandlersSynthesisEngineDlq0BCDE437"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SynthesisEngineDlq/Policy/Resource"
   }
  },
  "GraphIntelligenceHandlersGraphMaterializerRole864DFE90": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "IAM role for graph-materializer Lambda function",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "cc-native-graph-materializer-role"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializerRole/Resource"
   }
  },
  "GraphIntelligenceHandlersGraphMaterializerRoleDefaultPolicy29F61D7F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountsTable81C15AE5",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GraphMaterializationStatusTable",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "neptune-db:ReadDataViaQuery",
        "neptune-db:WriteDataViaQuery",
        "neptune-db:connect"
       ],
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "true"
        },
        "StringEquals": {
         "neptune-db:QueryLanguage": "gremlin"
        }
       },
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:neptune-db:us-west-2:661268174397:",
          {
           "Ref": "NeptuneInfrastructureNeptuneCluster6F50D8EC"
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GraphIntelligenceHandlersGraphMaterializerRoleDefaultPolicy29F61D7F",
    "Roles": [
     {
      "Ref": "GraphIntelligenceHandlersGraphMaterializerRole864DFE90"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializerRole/DefaultPolicy/Resource"
   }
  },
  "GraphIntelligenceHandlersSynthesisEngineRole23D96DDD": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "IAM role for synthesis-engine Lambda function",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ],
    "RoleName": "cc-native-synthesis-engine-role"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SynthesisEngineRole/Resource"
   }
  },
  "GraphIntelligenceHandlersSynthesisEngineRoleDefaultPolicy6372121D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersSynthesisEngineDlq0BCDE437",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountsTable81C15AE5",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "GraphMaterializationStatusTable",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountPostureStateTable",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AccountPostureStateTable",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "neptune-db:ReadDataViaQuery",
        "neptune-db:WriteDataViaQuery",
        "neptune-db:connect"
       ],
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "true"
        },
        "StringEquals": {
         "neptune-db:QueryLanguage": "gremlin"
        }
       },
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:aws:neptune-db:us-west-2:661268174397:",
          {
           "Ref": "NeptuneInfrastructureNeptuneCluster6F50D8EC"
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "GraphIntelligenceHandlersSynthesisEngineRoleDefaultPolicy6372121D",
    "Roles": [
     {
      "Ref": "GraphIntelligenceHandlersSynthesisEngineRole23D96DDD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SynthesisEngineRole/DefaultPolicy/Resource"
   }
  },
  "GraphMaterializerHandler": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "6c2e123062019994a95b77105615939087ee662e18551abfb67bbb7c0bb415cf.zip"
    },
    "DeadLetterConfig": {
     "TargetArn": {
      "Fn::GetAtt": [
       "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E",
       "Arn"
      ]
     }
    },
    "Environment": {
     "Variables": {
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      },
      "NEPTUNE_CLUSTER_ENDPOINT": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureNeptuneCluster6F50D8EC",
        "Endpoint"
       ]
      },
      "NEPTUNE_CLUSTER_PORT": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureNeptuneCluster6F50D8EC",
        "Port"
       ]
      },
      "ACCOUNT_POSTURE_STATE_TABLE_NAME": {
       "Ref": "AccountPostureStateTable"
      },
      "GRAPH_MATERIALIZATION_STATUS_TABLE_NAME": {
       "Ref": "GraphMaterializationStatusTable"
      }
     }
    },
    "FunctionName": "cc-native-graph-materializer-handler",
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "GraphIntelligenceHandlersGraphMaterializerRole864DFE90",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "NeptuneInfrastructureGraphMaterializerSecurityGroupE324FDAD",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
      },
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
      }
     ]
    }
   },
   "DependsOn": [
    "GraphIntelligenceHandlersGraphMaterializerRoleDefaultPolicy29F61D7F",
    "GraphIntelligenceHandlersGraphMaterializerRole864DFE90",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTableAssociation9F6FC58C",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTableAssociationB0458231"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializerHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GraphIntelligenceHandlersGraphMaterializerHandlerEventInvokeConfig326AD5A9": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "GraphMaterializerHandler"
    },
    "MaximumRetryAttempts": 2,
    "Qualifier": "$LATEST"
   },
   "DependsOn": [
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTableAssociation9F6FC58C",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTableAssociationB0458231"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializerHandler/EventInvokeConfig/Resource"
   }
  },
  "SynthesisEngineHandler": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "5f70dc10b340655b10f78604e94c8d6d39cc377389e38840f1e3682585861714.zip"
    },
    "DeadLetterConfig": {
     "TargetArn": {
      "Fn::GetAtt": [
       "GraphIntelligenceHandlersSynthesisEngineDlq0BCDE437",
       "Arn"
      ]
     }
    },
    "Environment": {
     "Variables": {
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      },
      "NEPTUNE_CLUSTER_ENDPOINT": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureNeptuneCluster6F50D8EC",
        "Endpoint"
       ]
      },
      "NEPTUNE_CLUSTER_PORT": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureNeptuneCluster6F50D8EC",
        "Port"
       ]
      },
      "ACCOUNT_POSTURE_STATE_TABLE_NAME": {
       "Ref": "AccountPostureStateTable"
      },
      "GRAPH_MATERIALIZATION_STATUS_TABLE_NAME": {
       "Ref": "GraphMaterializationStatusTable"
      }
     }
    },
    "FunctionName": "cc-native-synthesis-engine-handler",
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "GraphIntelligenceHandlersSynthesisEngineRole23D96DDD",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 180,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "NeptuneInfrastructureSynthesisEngineSecurityGroup862BB426",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
      },
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
      }
     ]
    }
   },
   "DependsOn": [
    "GraphIntelligenceHandlersSynthesisEngineRoleDefaultPolicy6372121D",
    "GraphIntelligenceHandlersSynthesisEngineRole23D96DDD",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTableAssociation9F6FC58C",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTableAssociationB0458231"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SynthesisEngineHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "GraphIntelligenceHandlersSynthesisEngineHandlerEventInvokeConfig426F220B": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "SynthesisEngineHandler"
    },
    "MaximumRetryAttempts": 2,
    "Qualifier": "$LATEST"
   },
   "DependsOn": [
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTableAssociation9F6FC58C",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTableAssociationB0458231"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SynthesisEngineHandler/EventInvokeConfig/Resource"
   }
  },
  "GraphIntelligenceHandlersSignalDetectedToGraphMaterializerRule1A475BC7": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.perception"
     ],
     "detail-type": [
      "SIGNAL_DETECTED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "GraphMaterializerHandler",
        "Arn"
       ]
      },
      "DeadLetterConfig": {
       "Arn": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E",
         "Arn"
        ]
       }
      },
      "Id": "Target0",
      "RetryPolicy": {
       "MaximumRetryAttempts": 2
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SignalDetectedToGraphMaterializerRule/Resource"
   }
  },
  "GraphIntelligenceHandlersSignalDetectedToGraphMaterializerRuleAllowEventRuleCCNativeStackGraphIntelligenceHandlersGraphMaterializerHandler2AD3E9DC170D41E4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GraphMaterializerHandler",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "GraphIntelligenceHandlersSignalDetectedToGraphMaterializerRule1A475BC7",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SignalDetectedToGraphMaterializerRule/AllowEventRuleCCNativeStackGraphIntelligenceHandlersGraphMaterializerHandler2AD3E9DC"
   }
  },
  "GraphIntelligenceHandlersSignalCreatedToGraphMaterializerRule3158BF8B": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.perception"
     ],
     "detail-type": [
      "SIGNAL_CREATED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "GraphMaterializerHandler",
        "Arn"
       ]
      },
      "DeadLetterConfig": {
       "Arn": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersGraphMaterializerDlq875ECC3E",
         "Arn"
        ]
       }
      },
      "Id": "Target0",
      "RetryPolicy": {
       "MaximumRetryAttempts": 2
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SignalCreatedToGraphMaterializerRule/Resource"
   }
  },
  "GraphIntelligenceHandlersSignalCreatedToGraphMaterializerRuleAllowEventRuleCCNativeStackGraphIntelligenceHandlersGraphMaterializerHandler2AD3E9DC05FEF707": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "GraphMaterializerHandler",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "GraphIntelligenceHandlersSignalCreatedToGraphMaterializerRule3158BF8B",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/SignalCreatedToGraphMaterializerRule/AllowEventRuleCCNativeStackGraphIntelligenceHandlersGraphMaterializerHandler2AD3E9DC"
   }
  },
  "GraphIntelligenceHandlersGraphMaterializedToSynthesisRule94B777F4": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.graph"
     ],
     "detail-type": [
      "GRAPH_MATERIALIZED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "SynthesisEngineHandler",
        "Arn"
       ]
      },
      "DeadLetterConfig": {
       "Arn": {
        "Fn::GetAtt": [
         "GraphIntelligenceHandlersSynthesisEngineDlq0BCDE437",
         "Arn"
        ]
       }
      },
      "Id": "Target0",
      "RetryPolicy": {
       "MaximumRetryAttempts": 2
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializedToSynthesisRule/Resource"
   }
  },
  "GraphIntelligenceHandlersGraphMaterializedToSynthesisRuleAllowEventRuleCCNativeStackGraphIntelligenceHandlersSynthesisEngineHandler045C593E22975BE8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SynthesisEngineHandler",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "GraphIntelligenceHandlersGraphMaterializedToSynthesisRule94B777F4",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/GraphIntelligenceHandlers/GraphMaterializedToSynthesisRule/AllowEventRuleCCNativeStackGraphIntelligenceHandlersSynthesisEngineHandler045C593E"
   }
  },
  "SecurityMonitoringSecurityAlertsTopic976B7E04": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "DisplayName": "CC Native Security Alerts",
    "TopicName": "cc-native-security-alerts"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SecurityMonitoring/SecurityAlertsTopic/Resource"
   }
  },
  "SecurityMonitoringNeptuneUnauthorizedConnectionsB8CD92BB": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "SecurityMonitoringSecurityAlertsTopic976B7E04"
     }
    ],
    "AlarmName": "cc-native-neptune-unauthorized-connections",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "DBClusterIdentifier",
      "Value": {
       "Ref": "NeptuneInfrastructureNeptuneCluster6F50D8EC"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "DatabaseConnections",
    "Namespace": "AWS/Neptune",
    "Period": 300,
    "Statistic": "Sum",
    "Threshold": 100,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SecurityMonitoring/NeptuneUnauthorizedConnections/Resource"
   }
  },
  "SecurityMonitoringGraphMaterializerErrors7E76685B": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "SecurityMonitoringSecurityAlertsTopic976B7E04"
     }
    ],
    "AlarmName": "cc-native-graph-materializer-errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "GraphMaterializerHandler"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "Errors",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Threshold": 5,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SecurityMonitoring/GraphMaterializerErrors/Resource"
   }
  },
  "SecurityMonitoringSynthesisEngineErrorsE0DB3F13": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "SecurityMonitoringSecurityAlertsTopic976B7E04"
     }
    ],
    "AlarmName": "cc-native-synthesis-engine-errors",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "FunctionName",
      "Value": {
       "Ref": "SynthesisEngineHandler"
      }
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "Errors",
    "Namespace": "AWS/Lambda",
    "Period": 300,
    "Statistic": "Sum",
    "Threshold": 5,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SecurityMonitoring/SynthesisEngineErrors/Resource"
   }
  },
  "SecurityMonitoringHighDynamoDBEndpointTraffic04E6B06B": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "SecurityMonitoringSecurityAlertsTopic976B7E04"
     }
    ],
    "AlarmName": "cc-native-high-dynamodb-endpoint-traffic",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "ServiceName",
      "Value": "com.amazonaws.us-west-2.dynamodb"
     }
    ],
    "EvaluationPeriods": 2,
    "MetricName": "BytesProcessed",
    "Namespace": "AWS/PrivateLinkEndpoints",
    "Period": 300,
    "Statistic": "Sum",
    "Threshold": 1000000000,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SecurityMonitoring/HighDynamoDBEndpointTraffic/Resource"
   }
  },
  "SecurityMonitoringNeptuneIAMAuthFailure5B61A41C": {
   "Type": "AWS::Logs::MetricFilter",
   "Properties": {
    "FilterPattern": "\"AUTHENTICATION_FAILED\"",
    "LogGroupName": {
     "Ref": "NeptuneAuditLogGroup"
    },
    "MetricTransformations": [
     {
      "MetricName": "NeptuneIAMAuthFailures",
      "MetricNamespace": "CCNative/Security",
      "MetricValue": "1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SecurityMonitoring/NeptuneIAMAuthFailure/Resource"
   }
  },
  "SecurityMonitoringNeptuneIAMAuthFailureAlarmF4453F7B": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "AlarmActions": [
     {
      "Ref": "SecurityMonitoringSecurityAlertsTopic976B7E04"
     }
    ],
    "AlarmName": "cc-native-neptune-iam-auth-failure",
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "EvaluationPeriods": 1,
    "MetricName": "NeptuneIAMAuthFailures",
    "Namespace": "CCNative/Security",
    "Period": 300,
    "Statistic": "Sum",
    "Threshold": 3,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/SecurityMonitoring/NeptuneIAMAuthFailureAlarm/Resource"
   }
  },
  "DecisionInfrastructureDecisionEvaluationDlq97E1320F": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "cc-native-decision-evaluation-handler-dlq"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationDlq/Resource"
   }
  },
  "DecisionInfrastructureDecisionTriggerDlq6811F631": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "cc-native-decision-trigger-handler-dlq"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionTriggerDlq/Resource"
   }
  },
  "DecisionInfrastructureDecisionEvaluationSecurityGroup0DDCFEF6": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Security group for decision evaluation handler (Neptune access)",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow HTTPS to AWS services via VPC endpoints (Gateway endpoint for DynamoDB, Interface endpoints for other services)",
      "FromPort": 443,
      "IpProtocol": "tcp",
      "ToPort": 443
     }
    ],
    "VpcId": {
     "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationSecurityGroup/Resource"
   }
  },
  "DecisionInfrastructureDecisionEvaluationSecurityGrouptoCCNativeStackNeptuneInfrastructureNeptuneSecurityGroup570D658A8182F9D07BC5": {
   "Type": "AWS::EC2::SecurityGroupEgress",
   "Properties": {
    "Description": "Allow access to Neptune cluster",
    "DestinationSecurityGroupId": {
     "Fn::GetAtt": [
      "NeptuneInfrastructureNeptuneSecurityGroup4DAE2150",
      "GroupId"
     ]
    },
    "FromPort": 8182,
    "GroupId": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionEvaluationSecurityGroup0DDCFEF6",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "ToPort": 8182
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationSecurityGroup/to CCNativeStackNeptuneInfrastructureNeptuneSecurityGroup570D658A:8182"
   }
  },
  "DecisionInfrastructureDecisionEvaluationRole85692DD2": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "IAM role for decision evaluation handler",
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationRole/Resource"
   }
  },
  "DecisionInfrastructureDecisionEvaluationRoleDefaultPolicy1AC40134": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DecisionInfrastructureDecisionEvaluationDlq97E1320F",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ActionIntentTable72DEAEAE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "DecisionBudgetTable24B12A3D",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "DecisionProposalTable5A1A6F51",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ActionIntentTable72DEAEAE",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DecisionProposalTable5A1A6F51",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountPostureStateTable",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "AccountsTable81C15AE5",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "TenantsTableB701DC57",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AccountPostureStateTable",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      },
      {
       "Action": "bedrock:InvokeModel",
       "Condition": {
        "StringEquals": {
         "aws:RequestedRegion": "us-west-2"
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "neptune-db:DeleteDataViaQuery",
        "neptune-db:ReadDataViaQuery",
        "neptune-db:WriteDataViaQuery",
        "neptune-db:connect"
       ],
       "Effect": "Allow",
       "Resource": "arn:aws:neptune-db:us-west-2:661268174397:cluster-*/*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DecisionInfrastructureDecisionEvaluationRoleDefaultPolicy1AC40134",
    "Roles": [
     {
      "Ref": "DecisionInfrastructureDecisionEvaluationRole85692DD2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationRole/DefaultPolicy/Resource"
   }
  },
  "DecisionInfrastructureDecisionEvaluationHandler8D3F092E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "8902221d530915b77fcb845c3e921222864c265e467b3c304f19de4452d30ad3.zip"
    },
    "DeadLetterConfig": {
     "TargetArn": {
      "Fn::GetAtt": [
       "DecisionInfrastructureDecisionEvaluationDlq97E1320F",
       "Arn"
      ]
     }
    },
    "Environment": {
     "Variables": {
      "DECISION_BUDGET_TABLE_NAME": {
       "Ref": "DecisionBudgetTable24B12A3D"
      },
      "ACTION_INTENT_TABLE_NAME": {
       "Ref": "ActionIntentTable72DEAEAE"
      },
      "DECISION_PROPOSAL_TABLE_NAME": {
       "Ref": "DecisionProposalTable5A1A6F51"
      },
      "ACCOUNT_POSTURE_STATE_TABLE_NAME": {
       "Ref": "AccountPostureStateTable"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "TENANTS_TABLE_NAME": {
       "Ref": "TenantsTableB701DC57"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      },
      "NEPTUNE_ENDPOINT": {
       "Fn::GetAtt": [
        "NeptuneInfrastructureNeptuneCluster6F50D8EC",
        "Endpoint"
       ]
      },
      "NEPTUNE_PORT": "8182",
      "BEDROCK_MODEL_ID": "anthropic.claude-3-5-sonnet-20240620-v1:0"
     }
    },
    "FunctionName": "cc-native-decision-evaluation-handler",
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionEvaluationRole85692DD2",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 300,
    "VpcConfig": {
     "SecurityGroupIds": [
      {
       "Fn::GetAtt": [
        "DecisionInfrastructureDecisionEvaluationSecurityGroup0DDCFEF6",
        "GroupId"
       ]
      }
     ],
     "SubnetIds": [
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
      },
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
      }
     ]
    }
   },
   "DependsOn": [
    "DecisionInfrastructureDecisionEvaluationRoleDefaultPolicy1AC40134",
    "DecisionInfrastructureDecisionEvaluationRole85692DD2",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTableAssociation9F6FC58C",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTableAssociationB0458231"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DecisionInfrastructureDecisionEvaluationHandlerEventInvokeConfigF4BBA8E8": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "DecisionInfrastructureDecisionEvaluationHandler8D3F092E"
    },
    "MaximumRetryAttempts": 2,
    "Qualifier": "$LATEST"
   },
   "DependsOn": [
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1RouteTableAssociation9F6FC58C",
    "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2RouteTableAssociationB0458231"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationHandler/EventInvokeConfig/Resource"
   }
  },
  "DecisionInfrastructureDecisionTriggerHandlerServiceRoleAC7EF664": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionTriggerHandler/ServiceRole/Resource"
   }
  },
  "DecisionInfrastructureDecisionTriggerHandlerServiceRoleDefaultPolicyB0216342": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DecisionInfrastructureDecisionTriggerDlq6811F631",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountPostureStateTable",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "AccountsTable81C15AE5",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AccountPostureStateTable",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DecisionInfrastructureDecisionTriggerHandlerServiceRoleDefaultPolicyB0216342",
    "Roles": [
     {
      "Ref": "DecisionInfrastructureDecisionTriggerHandlerServiceRoleAC7EF664"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionTriggerHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DecisionInfrastructureDecisionTriggerHandler2F0CD40A": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "f547af4d0b85ea19b6cbb6d5b5df413ce101963fa0a0cbdd1648da5a9ddfb54c.zip"
    },
    "DeadLetterConfig": {
     "TargetArn": {
      "Fn::GetAtt": [
       "DecisionInfrastructureDecisionTriggerDlq6811F631",
       "Arn"
      ]
     }
    },
    "Environment": {
     "Variables": {
      "ACCOUNT_POSTURE_STATE_TABLE_NAME": {
       "Ref": "AccountPostureStateTable"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      }
     }
    },
    "FunctionName": "cc-native-decision-trigger-handler",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionTriggerHandlerServiceRoleAC7EF664",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30
   },
   "DependsOn": [
    "DecisionInfrastructureDecisionTriggerHandlerServiceRoleDefaultPolicyB0216342",
    "DecisionInfrastructureDecisionTriggerHandlerServiceRoleAC7EF664"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionTriggerHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DecisionInfrastructureDecisionTriggerHandlerEventInvokeConfigCD73DC86": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "DecisionInfrastructureDecisionTriggerHandler2F0CD40A"
    },
    "MaximumRetryAttempts": 2,
    "Qualifier": "$LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionTriggerHandler/EventInvokeConfig/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiHandlerServiceRoleD413C70C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApiHandler/ServiceRole/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiHandlerServiceRoleDefaultPolicy69037719": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ActionIntentTable72DEAEAE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "DecisionBudgetTable24B12A3D",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "DecisionProposalTable5A1A6F51",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ActionIntentTable72DEAEAE",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DecisionProposalTable5A1A6F51",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountPostureStateTable",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "AccountsTable81C15AE5",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "TenantsTableB701DC57",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AccountPostureStateTable",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DecisionInfrastructureDecisionApiHandlerServiceRoleDefaultPolicy69037719",
    "Roles": [
     {
      "Ref": "DecisionInfrastructureDecisionApiHandlerServiceRoleD413C70C"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApiHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiHandler34C8795E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "db19d4006412c1f264526708c11f0ca07470e169df4187b2b04cf6ae1ccfb405.zip"
    },
    "Environment": {
     "Variables": {
      "DECISION_BUDGET_TABLE_NAME": {
       "Ref": "DecisionBudgetTable24B12A3D"
      },
      "ACTION_INTENT_TABLE_NAME": {
       "Ref": "ActionIntentTable72DEAEAE"
      },
      "DECISION_PROPOSAL_TABLE_NAME": {
       "Ref": "DecisionProposalTable5A1A6F51"
      },
      "ACCOUNT_POSTURE_STATE_TABLE_NAME": {
       "Ref": "AccountPostureStateTable"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "TENANTS_TABLE_NAME": {
       "Ref": "TenantsTableB701DC57"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      }
     }
    },
    "FunctionName": "cc-native-decision-api-handler",
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandlerServiceRoleD413C70C",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30
   },
   "DependsOn": [
    "DecisionInfrastructureDecisionApiHandlerServiceRoleDefaultPolicy69037719",
    "DecisionInfrastructureDecisionApiHandlerServiceRoleD413C70C"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApiHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DecisionInfrastructureDecisionApiE67E0AE4": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "Decision evaluation and approval API",
    "Name": "cc-native-decision-api"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiDeployment0FBC1C0F13c127e98daba9683cb0717fdaef0eda": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Decision evaluation and approval API",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "DependsOn": [
    "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsGETD93B393B",
    "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsOPTIONS2366DD38",
    "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsDAA2822A",
    "DecisionInfrastructureDecisionApiaccountsaccountidOPTIONSB61E9683",
    "DecisionInfrastructureDecisionApiaccountsaccountidE2BD3D03",
    "DecisionInfrastructureDecisionApiaccountsOPTIONS2BF5C48C",
    "DecisionInfrastructureDecisionApiaccounts092411B8",
    "DecisionInfrastructureDecisionApiactionsactionidapproveOPTIONS9624D961",
    "DecisionInfrastructureDecisionApiactionsactionidapprovePOSTC1629F0B",
    "DecisionInfrastructureDecisionApiactionsactionidapprove856291A9",
    "DecisionInfrastructureDecisionApiactionsactionidOPTIONS171F6394",
    "DecisionInfrastructureDecisionApiactionsactionidrejectOPTIONS78CCE605",
    "DecisionInfrastructureDecisionApiactionsactionidrejectPOST532B9544",
    "DecisionInfrastructureDecisionApiactionsactionidreject07691836",
    "DecisionInfrastructureDecisionApiactionsactionid665D7267",
    "DecisionInfrastructureDecisionApiactionsOPTIONS55E49B7A",
    "DecisionInfrastructureDecisionApiactionsADF2227F",
    "DecisionInfrastructureDecisionApidecisionsevaluationidOPTIONS47F9FCAC",
    "DecisionInfrastructureDecisionApidecisionsevaluationid42DBD698",
    "DecisionInfrastructureDecisionApidecisionsevaluationidstatusGET43D1484A",
    "DecisionInfrastructureDecisionApidecisionsevaluationidstatusOPTIONSB298ECA4",
    "DecisionInfrastructureDecisionApidecisionsevaluationidstatus9E7120F0",
    "DecisionInfrastructureDecisionApidecisionsevaluateOPTIONSEB9C1683",
    "DecisionInfrastructureDecisionApidecisionsevaluatePOST5C5BD30A",
    "DecisionInfrastructureDecisionApidecisionsevaluateD3A16FF9",
    "DecisionInfrastructureDecisionApidecisionsOPTIONSBCB0A202",
    "DecisionInfrastructureDecisionApidecisions17D4B7C8",
    "DecisionInfrastructureDecisionApiOPTIONS8E85EC86",
    "DecisionInfrastructureDecisionApiCognitoAuthorizer44458B1E"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Deployment/Resource",
    "aws:cdk:do-not-refactor": true
   }
  },
  "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "DecisionInfrastructureDecisionApiDeployment0FBC1C0F13c127e98daba9683cb0717fdaef0eda"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    },
    "StageName": "prod"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/DeploymentStage.prod/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiOPTIONS8E85EC86": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiE67E0AE4",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisions17D4B7C8": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiE67E0AE4",
      "RootResourceId"
     ]
    },
    "PathPart": "decisions",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsOPTIONSBCB0A202": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApidecisions17D4B7C8"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluateD3A16FF9": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApidecisions17D4B7C8"
    },
    "PathPart": "evaluate",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/evaluate/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluateOPTIONSEB9C1683": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApidecisionsevaluateD3A16FF9"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/evaluate/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluatePOSTApiPermissionCCNativeStackDecisionInfrastructureDecisionApi86383A64POSTdecisionsevaluate32BD6245": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/",
       {
        "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
       },
       "/POST/decisions/evaluate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/evaluate/POST/ApiPermission.CCNativeStackDecisionInfrastructureDecisionApi86383A64.POST..decisions.evaluate"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluatePOSTApiPermissionTestCCNativeStackDecisionInfrastructureDecisionApi86383A64POSTdecisionsevaluate9479506D": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/test-invoke-stage/POST/decisions/evaluate"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/evaluate/POST/ApiPermission.Test.CCNativeStackDecisionInfrastructureDecisionApi86383A64.POST..decisions.evaluate"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluatePOST5C5BD30A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "DecisionInfrastructureDecisionApiCognitoAuthorizer44458B1E"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DecisionInfrastructureDecisionApiHandler34C8795E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApidecisionsevaluateD3A16FF9"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/evaluate/POST/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluationid42DBD698": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApidecisions17D4B7C8"
    },
    "PathPart": "{evaluation_id}",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/{evaluation_id}/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluationidOPTIONS47F9FCAC": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApidecisionsevaluationid42DBD698"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/{evaluation_id}/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluationidstatus9E7120F0": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApidecisionsevaluationid42DBD698"
    },
    "PathPart": "status",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/{evaluation_id}/status/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluationidstatusOPTIONSB298ECA4": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApidecisionsevaluationidstatus9E7120F0"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/{evaluation_id}/status/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluationidstatusGETApiPermissionCCNativeStackDecisionInfrastructureDecisionApi86383A64GETdecisionsevaluationidstatusF3C15761": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/",
       {
        "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
       },
       "/GET/decisions/*/status"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/{evaluation_id}/status/GET/ApiPermission.CCNativeStackDecisionInfrastructureDecisionApi86383A64.GET..decisions.{evaluation_id}.status"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluationidstatusGETApiPermissionTestCCNativeStackDecisionInfrastructureDecisionApi86383A64GETdecisionsevaluationidstatusF40BC49F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/test-invoke-stage/GET/decisions/*/status"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/{evaluation_id}/status/GET/ApiPermission.Test.CCNativeStackDecisionInfrastructureDecisionApi86383A64.GET..decisions.{evaluation_id}.status"
   }
  },
  "DecisionInfrastructureDecisionApidecisionsevaluationidstatusGET43D1484A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "DecisionInfrastructureDecisionApiCognitoAuthorizer44458B1E"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DecisionInfrastructureDecisionApiHandler34C8795E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApidecisionsevaluationidstatus9E7120F0"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/decisions/{evaluation_id}/status/GET/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiaccounts092411B8": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiE67E0AE4",
      "RootResourceId"
     ]
    },
    "PathPart": "accounts",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsOPTIONS2BF5C48C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiaccounts092411B8"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsaccountidE2BD3D03": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApiaccounts092411B8"
    },
    "PathPart": "{account_id}",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/{account_id}/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsaccountidOPTIONSB61E9683": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiaccountsaccountidE2BD3D03"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/{account_id}/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsDAA2822A": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApiaccountsaccountidE2BD3D03"
    },
    "PathPart": "decisions",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/{account_id}/decisions/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsOPTIONS2366DD38": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsDAA2822A"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/{account_id}/decisions/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsGETApiPermissionCCNativeStackDecisionInfrastructureDecisionApi86383A64GETaccountsaccountiddecisions43859595": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/",
       {
        "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
       },
       "/GET/accounts/*/decisions"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/{account_id}/decisions/GET/ApiPermission.CCNativeStackDecisionInfrastructureDecisionApi86383A64.GET..accounts.{account_id}.decisions"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsGETApiPermissionTestCCNativeStackDecisionInfrastructureDecisionApi86383A64GETaccountsaccountiddecisionsAB1CFC2C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/test-invoke-stage/GET/accounts/*/decisions"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/{account_id}/decisions/GET/ApiPermission.Test.CCNativeStackDecisionInfrastructureDecisionApi86383A64.GET..accounts.{account_id}.decisions"
   }
  },
  "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsGETD93B393B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "DecisionInfrastructureDecisionApiCognitoAuthorizer44458B1E"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DecisionInfrastructureDecisionApiHandler34C8795E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiaccountsaccountiddecisionsDAA2822A"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/accounts/{account_id}/decisions/GET/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsADF2227F": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiE67E0AE4",
      "RootResourceId"
     ]
    },
    "PathPart": "actions",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsOPTIONS55E49B7A": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsADF2227F"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionid665D7267": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsADF2227F"
    },
    "PathPart": "{action_id}",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidOPTIONS171F6394": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsactionid665D7267"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidapprove856291A9": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsactionid665D7267"
    },
    "PathPart": "approve",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/approve/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidapproveOPTIONS9624D961": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsactionidapprove856291A9"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/approve/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidapprovePOSTApiPermissionCCNativeStackDecisionInfrastructureDecisionApi86383A64POSTactionsactionidapproveD1216C87": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/",
       {
        "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
       },
       "/POST/actions/*/approve"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/approve/POST/ApiPermission.CCNativeStackDecisionInfrastructureDecisionApi86383A64.POST..actions.{action_id}.approve"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidapprovePOSTApiPermissionTestCCNativeStackDecisionInfrastructureDecisionApi86383A64POSTactionsactionidapprove84D0DC18": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/test-invoke-stage/POST/actions/*/approve"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/approve/POST/ApiPermission.Test.CCNativeStackDecisionInfrastructureDecisionApi86383A64.POST..actions.{action_id}.approve"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidapprovePOSTC1629F0B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "DecisionInfrastructureDecisionApiCognitoAuthorizer44458B1E"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DecisionInfrastructureDecisionApiHandler34C8795E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsactionidapprove856291A9"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/approve/POST/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidreject07691836": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsactionid665D7267"
    },
    "PathPart": "reject",
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/reject/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidrejectOPTIONS78CCE605": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,X-Amz-Date,Authorization,X-Api-Key,x-tenant-id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,POST,PUT,DELETE,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsactionidreject07691836"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/reject/OPTIONS/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidrejectPOSTApiPermissionCCNativeStackDecisionInfrastructureDecisionApi86383A64POSTactionsactionidreject8DD98F2F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/",
       {
        "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
       },
       "/POST/actions/*/reject"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/reject/POST/ApiPermission.CCNativeStackDecisionInfrastructureDecisionApi86383A64.POST..actions.{action_id}.reject"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidrejectPOSTApiPermissionTestCCNativeStackDecisionInfrastructureDecisionApi86383A64POSTactionsactionidrejectA5451AB8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionApiHandler34C8795E",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
       },
       "/test-invoke-stage/POST/actions/*/reject"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/reject/POST/ApiPermission.Test.CCNativeStackDecisionInfrastructureDecisionApi86383A64.POST..actions.{action_id}.reject"
   }
  },
  "DecisionInfrastructureDecisionApiactionsactionidrejectPOST532B9544": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": true,
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "DecisionInfrastructureDecisionApiCognitoAuthorizer44458B1E"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "DecisionInfrastructureDecisionApiHandler34C8795E",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "DecisionInfrastructureDecisionApiactionsactionidreject07691836"
    },
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApi/Default/actions/{action_id}/reject/POST/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiCognitoAuthorizer44458B1E": {
   "Type": "AWS::ApiGateway::Authorizer",
   "Properties": {
    "IdentitySource": "method.request.header.Authorization",
    "Name": "CCNativeStackDecisionInfrastructureDecisionApiCognitoAuthorizerDC9E495B",
    "ProviderARNs": [
     {
      "Fn::GetAtt": [
       "UserPool6BA7E5F2",
       "Arn"
      ]
     }
    ],
    "RestApiId": {
     "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
    },
    "Type": "COGNITO_USER_POOLS"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApiCognitoAuthorizer/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiKey4D053422": {
   "Type": "AWS::ApiGateway::ApiKey",
   "Properties": {
    "Description": "API key for Decision API authorization (fallback for service-to-service calls)",
    "Enabled": true,
    "Name": "cc-native-decision-api-key"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApiKey/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiUsagePlanE4794753": {
   "Type": "AWS::ApiGateway::UsagePlan",
   "Properties": {
    "ApiStages": [
     {
      "ApiId": {
       "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
      },
      "Stage": {
       "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
      },
      "Throttle": {}
     }
    ],
    "Description": "Usage plan for Decision API",
    "Quota": {
     "Limit": 10000,
     "Period": "DAY"
    },
    "Throttle": {
     "BurstLimit": 200,
     "RateLimit": 100
    },
    "UsagePlanName": "cc-native-decision-api-usage-plan"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApiUsagePlan/Resource"
   }
  },
  "DecisionInfrastructureDecisionApiUsagePlanUsagePlanKeyResourceCCNativeStackDecisionInfrastructureDecisionApiKeyCFC7E4FFDE3E110E": {
   "Type": "AWS::ApiGateway::UsagePlanKey",
   "Properties": {
    "KeyId": {
     "Ref": "DecisionInfrastructureDecisionApiKey4D053422"
    },
    "KeyType": "API_KEY",
    "UsagePlanId": {
     "Ref": "DecisionInfrastructureDecisionApiUsagePlanE4794753"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionApiUsagePlan/UsagePlanKeyResource:CCNativeStackDecisionInfrastructureDecisionApiKeyCFC7E4FF"
   }
  },
  "DecisionInfrastructureLifecycleDecisionTriggerRule6526AA52": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.perception"
     ],
     "detail-type": [
      "LIFECYCLE_STATE_CHANGED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "DecisionInfrastructureDecisionTriggerHandler2F0CD40A",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/LifecycleDecisionTriggerRule/Resource"
   }
  },
  "DecisionInfrastructureLifecycleDecisionTriggerRuleAllowEventRuleCCNativeStackDecisionInfrastructureDecisionTriggerHandler379F7866FD5EC258": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionTriggerHandler2F0CD40A",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "DecisionInfrastructureLifecycleDecisionTriggerRule6526AA52",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/LifecycleDecisionTriggerRule/AllowEventRuleCCNativeStackDecisionInfrastructureDecisionTriggerHandler379F7866"
   }
  },
  "DecisionInfrastructureHighSignalDecisionTriggerRuleC6F185DA": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.perception"
     ],
     "detail-type": [
      "SIGNAL_DETECTED"
     ],
     "detail": {
      "signal_type": [
       "RENEWAL_WINDOW_ENTERED",
       "SUPPORT_RISK_EMERGING",
       "USAGE_TREND_CHANGE"
      ]
     }
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "DecisionInfrastructureDecisionTriggerHandler2F0CD40A",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/HighSignalDecisionTriggerRule/Resource"
   }
  },
  "DecisionInfrastructureHighSignalDecisionTriggerRuleAllowEventRuleCCNativeStackDecisionInfrastructureDecisionTriggerHandler379F7866DC4D6405": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionTriggerHandler2F0CD40A",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "DecisionInfrastructureHighSignalDecisionTriggerRuleC6F185DA",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/HighSignalDecisionTriggerRule/AllowEventRuleCCNativeStackDecisionInfrastructureDecisionTriggerHandler379F7866"
   }
  },
  "DecisionInfrastructureDecisionEvaluationRule790E1C57": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.decision"
     ],
     "detail-type": [
      "DECISION_EVALUATION_REQUESTED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "DecisionInfrastructureDecisionEvaluationHandler8D3F092E",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationRule/Resource"
   }
  },
  "DecisionInfrastructureDecisionEvaluationRuleAllowEventRuleCCNativeStackDecisionInfrastructureDecisionEvaluationHandlerE24EBB36613C6B22": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionEvaluationHandler8D3F092E",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "DecisionInfrastructureDecisionEvaluationRule790E1C57",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/DecisionEvaluationRule/AllowEventRuleCCNativeStackDecisionInfrastructureDecisionEvaluationHandlerE24EBB36"
   }
  },
  "DecisionInfrastructureBudgetResetHandlerServiceRole845AD482": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/BudgetResetHandler/ServiceRole/Resource"
   }
  },
  "DecisionInfrastructureBudgetResetHandlerServiceRoleDefaultPolicy3D045514": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DecisionBudgetTable24B12A3D",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DecisionInfrastructureBudgetResetHandlerServiceRoleDefaultPolicy3D045514",
    "Roles": [
     {
      "Ref": "DecisionInfrastructureBudgetResetHandlerServiceRole845AD482"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/BudgetResetHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DecisionInfrastructureBudgetResetHandlerBD838B1E": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "c96e2497fa6e1a2c568f5e5ade947af136f4fdfdded577c7b5b103a192d6d2ac.zip"
    },
    "Environment": {
     "Variables": {
      "DECISION_BUDGET_TABLE_NAME": {
       "Ref": "DecisionBudgetTable24B12A3D"
      }
     }
    },
    "FunctionName": "cc-native-budget-reset-handler",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DecisionInfrastructureBudgetResetHandlerServiceRole845AD482",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 300
   },
   "DependsOn": [
    "DecisionInfrastructureBudgetResetHandlerServiceRoleDefaultPolicy3D045514",
    "DecisionInfrastructureBudgetResetHandlerServiceRole845AD482"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/BudgetResetHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DecisionInfrastructureBudgetResetScheduleRule61745EC1": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Daily budget reset at midnight UTC",
    "Name": "cc-native-budget-reset-schedule",
    "ScheduleExpression": "cron(0 0 * * ? *)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "DecisionInfrastructureBudgetResetHandlerBD838B1E",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/BudgetResetScheduleRule/Resource"
   }
  },
  "DecisionInfrastructureBudgetResetScheduleRuleAllowEventRuleCCNativeStackDecisionInfrastructureBudgetResetHandlerFAFE0849996ACE92": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionInfrastructureBudgetResetHandlerBD838B1E",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "DecisionInfrastructureBudgetResetScheduleRule61745EC1",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionInfrastructure/BudgetResetScheduleRule/AllowEventRuleCCNativeStackDecisionInfrastructureBudgetResetHandlerFAFE0849"
   }
  },
  "ExecutionStatusApi2E7AA195": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "Execution status API (GET execution status, list account executions)",
    "Name": "cc-native-execution-status-api"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Resource"
   }
  },
  "ExecutionStatusApiDeploymentBB536FDB93a456d9252facb98c40adcb95f31a8a": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Execution status API (GET execution status, list account executions)",
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "DependsOn": [
    "ExecutionStatusApiaccountsaccountidexecutionsGET76D41F70",
    "ExecutionStatusApiaccountsaccountidexecutionsOPTIONS799116E3",
    "ExecutionStatusApiaccountsaccountidexecutions3796AA0A",
    "ExecutionStatusApiaccountsaccountidOPTIONS8CD86C58",
    "ExecutionStatusApiaccountsaccountid962DCB51",
    "ExecutionStatusApiaccountsOPTIONS89359389",
    "ExecutionStatusApiaccounts321B49B7",
    "ExecutionStatusApiexecutionsactionintentidOPTIONSCBF76407",
    "ExecutionStatusApiexecutionsactionintentid9B3D34F9",
    "ExecutionStatusApiexecutionsactionintentidstatusGET00DE633F",
    "ExecutionStatusApiexecutionsactionintentidstatusOPTIONSFD11E5EE",
    "ExecutionStatusApiexecutionsactionintentidstatus0A7054E9",
    "ExecutionStatusApiexecutionsOPTIONSF6854D4B",
    "ExecutionStatusApiexecutions1639356C",
    "ExecutionStatusApiOPTIONS90673B66",
    "ExecutionStatusApiCognitoAuthorizer534415ED"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Deployment/Resource",
    "aws:cdk:do-not-refactor": true
   }
  },
  "ExecutionStatusApiDeploymentStageprod80307D0F": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "ExecutionStatusApiDeploymentBB536FDB93a456d9252facb98c40adcb95f31a8a"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    },
    "StageName": "prod"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/DeploymentStage.prod/Resource"
   }
  },
  "ExecutionStatusApiOPTIONS90673B66": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "ExecutionStatusApi2E7AA195",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/OPTIONS/Resource"
   }
  },
  "ExecutionStatusApiexecutions1639356C": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ExecutionStatusApi2E7AA195",
      "RootResourceId"
     ]
    },
    "PathPart": "executions",
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/Resource"
   }
  },
  "ExecutionStatusApiexecutionsOPTIONSF6854D4B": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ExecutionStatusApiexecutions1639356C"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/OPTIONS/Resource"
   }
  },
  "ExecutionStatusApiexecutionsactionintentid9B3D34F9": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ExecutionStatusApiexecutions1639356C"
    },
    "PathPart": "{action_intent_id}",
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/{action_intent_id}/Resource"
   }
  },
  "ExecutionStatusApiexecutionsactionintentidOPTIONSCBF76407": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ExecutionStatusApiexecutionsactionintentid9B3D34F9"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/{action_intent_id}/OPTIONS/Resource"
   }
  },
  "ExecutionStatusApiexecutionsactionintentidstatus0A7054E9": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ExecutionStatusApiexecutionsactionintentid9B3D34F9"
    },
    "PathPart": "status",
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/{action_intent_id}/status/Resource"
   }
  },
  "ExecutionStatusApiexecutionsactionintentidstatusOPTIONSFD11E5EE": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ExecutionStatusApiexecutionsactionintentidstatus0A7054E9"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/{action_intent_id}/status/OPTIONS/Resource"
   }
  },
  "ExecutionStatusApiexecutionsactionintentidstatusGETApiPermissionCCNativeStackExecutionStatusApi5AA9581DGETexecutionsactionintentidstatusA1118C63": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
      "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionStatusAPIHandlerD6EA4E3CArn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "ExecutionStatusApi2E7AA195"
       },
       "/",
       {
        "Ref": "ExecutionStatusApiDeploymentStageprod80307D0F"
       },
       "/GET/executions/*/status"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/{action_intent_id}/status/GET/ApiPermission.CCNativeStackExecutionStatusApi5AA9581D.GET..executions.{action_intent_id}.status"
   }
  },
  "ExecutionStatusApiexecutionsactionintentidstatusGETApiPermissionTestCCNativeStackExecutionStatusApi5AA9581DGETexecutionsactionintentidstatus639E7CB8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
      "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionStatusAPIHandlerD6EA4E3CArn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "ExecutionStatusApi2E7AA195"
       },
       "/test-invoke-stage/GET/executions/*/status"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/{action_intent_id}/status/GET/ApiPermission.Test.CCNativeStackExecutionStatusApi5AA9581D.GET..executions.{action_intent_id}.status"
   }
  },
  "ExecutionStatusApiexecutionsactionintentidstatusGET00DE633F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "ExecutionStatusApiCognitoAuthorizer534415ED"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
          "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionStatusAPIHandlerD6EA4E3CArn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ExecutionStatusApiexecutionsactionintentidstatus0A7054E9"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/executions/{action_intent_id}/status/GET/Resource"
   }
  },
  "ExecutionStatusApiaccounts321B49B7": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "ExecutionStatusApi2E7AA195",
      "RootResourceId"
     ]
    },
    "PathPart": "accounts",
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/Resource"
   }
  },
  "ExecutionStatusApiaccountsOPTIONS89359389": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ExecutionStatusApiaccounts321B49B7"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/OPTIONS/Resource"
   }
  },
  "ExecutionStatusApiaccountsaccountid962DCB51": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ExecutionStatusApiaccounts321B49B7"
    },
    "PathPart": "{account_id}",
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/{account_id}/Resource"
   }
  },
  "ExecutionStatusApiaccountsaccountidOPTIONS8CD86C58": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ExecutionStatusApiaccountsaccountid962DCB51"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/{account_id}/OPTIONS/Resource"
   }
  },
  "ExecutionStatusApiaccountsaccountidexecutions3796AA0A": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "ExecutionStatusApiaccountsaccountid962DCB51"
    },
    "PathPart": "executions",
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/{account_id}/executions/Resource"
   }
  },
  "ExecutionStatusApiaccountsaccountidexecutionsOPTIONS799116E3": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "ExecutionStatusApiaccountsaccountidexecutions3796AA0A"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/{account_id}/executions/OPTIONS/Resource"
   }
  },
  "ExecutionStatusApiaccountsaccountidexecutionsGETApiPermissionCCNativeStackExecutionStatusApi5AA9581DGETaccountsaccountidexecutions0AEEC8FC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
      "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionStatusAPIHandlerD6EA4E3CArn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "ExecutionStatusApi2E7AA195"
       },
       "/",
       {
        "Ref": "ExecutionStatusApiDeploymentStageprod80307D0F"
       },
       "/GET/accounts/*/executions"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/{account_id}/executions/GET/ApiPermission.CCNativeStackExecutionStatusApi5AA9581D.GET..accounts.{account_id}.executions"
   }
  },
  "ExecutionStatusApiaccountsaccountidexecutionsGETApiPermissionTestCCNativeStackExecutionStatusApi5AA9581DGETaccountsaccountidexecutions54EE319B": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
      "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionStatusAPIHandlerD6EA4E3CArn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "ExecutionStatusApi2E7AA195"
       },
       "/test-invoke-stage/GET/accounts/*/executions"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/{account_id}/executions/GET/ApiPermission.Test.CCNativeStackExecutionStatusApi5AA9581D.GET..accounts.{account_id}.executions"
   }
  },
  "ExecutionStatusApiaccountsaccountidexecutionsGET76D41F70": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "ExecutionStatusApiCognitoAuthorizer534415ED"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
          "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionStatusAPIHandlerD6EA4E3CArn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "ExecutionStatusApiaccountsaccountidexecutions3796AA0A"
    },
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApi/Default/accounts/{account_id}/executions/GET/Resource"
   }
  },
  "ExecutionStatusApiCognitoAuthorizer534415ED": {
   "Type": "AWS::ApiGateway::Authorizer",
   "Properties": {
    "IdentitySource": "method.request.header.Authorization",
    "Name": "CCNativeStackExecutionStatusApiCognitoAuthorizerCA3A050C",
    "ProviderARNs": [
     {
      "Fn::GetAtt": [
       "UserPool6BA7E5F2",
       "Arn"
      ]
     }
    ],
    "RestApiId": {
     "Ref": "ExecutionStatusApi2E7AA195"
    },
    "Type": "COGNITO_USER_POOLS"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionStatusApiCognitoAuthorizer/Resource"
   }
  },
  "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB": {
   "Type": "AWS::CloudFormation::Stack",
   "Properties": {
    "Parameters": {
     "referencetoCCNativeStackActionIntentTable31610521Arn": {
      "Fn::GetAtt": [
       "ActionIntentTable72DEAEAE",
       "Arn"
      ]
     },
     "referencetoCCNativeStackLedgerTableFA76C270Arn": {
      "Fn::GetAtt": [
       "LedgerTable38A58B60",
       "Arn"
      ]
     },
     "referencetoCCNativeStackActionIntentTable31610521Ref": {
      "Ref": "ActionIntentTable72DEAEAE"
     },
     "referencetoCCNativeStackLedgerTableFA76C270Ref": {
      "Ref": "LedgerTable38A58B60"
     },
     "referencetoCCNativeStackTenantsTable4B06C921Arn": {
      "Fn::GetAtt": [
       "TenantsTableB701DC57",
       "Arn"
      ]
     },
     "referencetoCCNativeStackTenantsTable4B06C921Ref": {
      "Ref": "TenantsTableB701DC57"
     },
     "referencetoCCNativeStackUserPoolWebClient6BD81726Ref": {
      "Ref": "UserPoolWebClient4C9370B0"
     },
     "referencetoCCNativeStackUserPoolCA4F225ARef": {
      "Ref": "UserPool6BA7E5F2"
     },
     "referencetoCCNativeStackUserPoolCA4F225AArn": {
      "Fn::GetAtt": [
       "UserPool6BA7E5F2",
       "Arn"
      ]
     },
     "referencetoCCNativeStackArtifactsBucketCE1423ECArn": {
      "Fn::GetAtt": [
       "ArtifactsBucket2AAC5544",
       "Arn"
      ]
     },
     "referencetoCCNativeStackArtifactsBucketCE1423ECRef": {
      "Ref": "ArtifactsBucket2AAC5544"
     },
     "referencetoCCNativeStackSignalsTableC39AB6D7Arn": {
      "Fn::GetAtt": [
       "SignalsTableE8D63F6D",
       "Arn"
      ]
     },
     "referencetoCCNativeStackCCNativeEventBus60C230DFArn": {
      "Fn::GetAtt": [
       "CCNativeEventBus892049F2",
       "Arn"
      ]
     },
     "referencetoCCNativeStackSignalsTableC39AB6D7Ref": {
      "Ref": "SignalsTableE8D63F6D"
     },
     "referencetoCCNativeStackCCNativeEventBus60C230DFRef": {
      "Ref": "CCNativeEventBus892049F2"
     }
    },
    "TemplateURL": {
     "Fn::Join": [
      "",
      [
       "https://s3.us-west-2.",
       {
        "Ref": "AWS::URLSuffix"
       },
       "/cdk-hnb659fds-assets-661268174397-us-west-2/7eae3fccdd10af3f9cf47a1a2be14b1e5f075678dd2204bcf133d685a89ef481.json"
      ]
     ]
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/ExecutionInfrastructureNestedStack.NestedStack/ExecutionInfrastructureNestedStack.NestedStackResource",
    "aws:asset:path": "CCNativeStackExecutionInfrastructureNestedStackF5105415.nested.template.json",
    "aws:asset:property": "TemplateURL"
   }
  },
  "AutonomyInfrastructureAutonomyConfigTableB0A451FC": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-autonomy-config",
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyConfigTable/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyBudgetStateTableD25ABDF3": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-autonomy-budget-state"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyBudgetStateTable/Resource"
   }
  },
  "AutonomyInfrastructureAuditExportTableE767D8B7": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "TableName": "cc-native-audit-export"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportTable/Resource"
   }
  },
  "AutonomyInfrastructureAuditExportBucket69E79BB1": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportBucket/Resource"
   }
  },
  "AutonomyInfrastructureAuditExportBucketPolicyAB0BFE28": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "AutonomyInfrastructureAuditExportBucket69E79BB1"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAuditExportBucket69E79BB1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AutonomyInfrastructureAuditExportBucket69E79BB1",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportBucket/Policy/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyAdminApiHandlerServiceRole16A3763F": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyAdminApiHandler/ServiceRole/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyAdminApiHandlerServiceRoleDefaultPolicyCA445691": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAuditExportTableE767D8B7",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyBudgetStateTableD25ABDF3",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyConfigTableB0A451FC",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "TenantsTableB701DC57",
          "Arn"
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAuditExportBucket69E79BB1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AutonomyInfrastructureAuditExportBucket69E79BB1",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ActionIntentTable72DEAEAE",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
          "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionOutcomesTableD8F81003Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ActionIntentTable72DEAEAE",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
             "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionOutcomesTableD8F81003Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AutonomyInfrastructureAutonomyAdminApiHandlerServiceRoleDefaultPolicyCA445691",
    "Roles": [
     {
      "Ref": "AutonomyInfrastructureAutonomyAdminApiHandlerServiceRole16A3763F"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyAdminApiHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "19d50c61b841c646626e5f100cec62190cae2735f1a35ff53addb8afa53b5447.zip"
    },
    "Environment": {
     "Variables": {
      "AUTONOMY_CONFIG_TABLE_NAME": {
       "Ref": "AutonomyInfrastructureAutonomyConfigTableB0A451FC"
      },
      "AUTONOMY_BUDGET_STATE_TABLE_NAME": {
       "Ref": "AutonomyInfrastructureAutonomyBudgetStateTableD25ABDF3"
      },
      "AUDIT_EXPORT_TABLE_NAME": {
       "Ref": "AutonomyInfrastructureAuditExportTableE767D8B7"
      },
      "AUDIT_EXPORT_BUCKET_NAME": {
       "Ref": "AutonomyInfrastructureAuditExportBucket69E79BB1"
      },
      "TENANTS_TABLE_NAME": {
       "Ref": "TenantsTableB701DC57"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EXECUTION_OUTCOMES_TABLE_NAME": {
       "Fn::GetAtt": [
        "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
        "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionOutcomesTableD8F81003Ref"
       ]
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      },
      "ACTION_INTENT_TABLE_NAME": {
       "Ref": "ActionIntentTable72DEAEAE"
      }
     }
    },
    "FunctionName": "cc-native-autonomy-admin-api",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandlerServiceRole16A3763F",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30
   },
   "DependsOn": [
    "AutonomyInfrastructureAutonomyAdminApiHandlerServiceRoleDefaultPolicyCA445691",
    "AutonomyInfrastructureAutonomyAdminApiHandlerServiceRole16A3763F"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyAdminApiHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AutonomyInfrastructureAutonomyApi709694A0": {
   "Type": "AWS::ApiGateway::RestApi",
   "Properties": {
    "Description": "Autonomy config and budget admin API (Phase 5.1)",
    "Name": "cc-native-autonomy-admin-api"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiDeployment1C07CBFB02049d4aceac58e93b9c8ffb6166867b": {
   "Type": "AWS::ApiGateway::Deployment",
   "Properties": {
    "Description": "Autonomy config and budget admin API (Phase 5.1)",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "DependsOn": [
    "AutonomyInfrastructureAutonomyApiauditexportsidGET2013A8E1",
    "AutonomyInfrastructureAutonomyApiauditexportsidOPTIONS520DDC28",
    "AutonomyInfrastructureAutonomyApiauditexportsidE8384FD0",
    "AutonomyInfrastructureAutonomyApiauditexportsOPTIONS1F808FCA",
    "AutonomyInfrastructureAutonomyApiauditexportsPOST89BA5DD0",
    "AutonomyInfrastructureAutonomyApiauditexports3348E991",
    "AutonomyInfrastructureAutonomyApiauditOPTIONSB9D5C7A2",
    "AutonomyInfrastructureAutonomyApiaudit1CD6B5BB",
    "AutonomyInfrastructureAutonomyApibudgetGET7267797C",
    "AutonomyInfrastructureAutonomyApibudgetOPTIONS6F265644",
    "AutonomyInfrastructureAutonomyApibudgetPUT48D44B11",
    "AutonomyInfrastructureAutonomyApibudget86CAFB24",
    "AutonomyInfrastructureAutonomyApibudgetstateGET1693BFEA",
    "AutonomyInfrastructureAutonomyApibudgetstateOPTIONS6AF71D30",
    "AutonomyInfrastructureAutonomyApibudgetstateB1680FEC",
    "AutonomyInfrastructureAutonomyApiconfigGET7ABCC228",
    "AutonomyInfrastructureAutonomyApiconfigOPTIONSA0E7A2EF",
    "AutonomyInfrastructureAutonomyApiconfigPUT2D49A097",
    "AutonomyInfrastructureAutonomyApiconfigC0C62407",
    "AutonomyInfrastructureAutonomyApikillswitchesGET9274D3FB",
    "AutonomyInfrastructureAutonomyApikillswitchesOPTIONSD5CEF4AD",
    "AutonomyInfrastructureAutonomyApikillswitchesPUT2E298081",
    "AutonomyInfrastructureAutonomyApikillswitches772DD280",
    "AutonomyInfrastructureAutonomyApiledgerexplanationGET45D7FA17",
    "AutonomyInfrastructureAutonomyApiledgerexplanationOPTIONS5E6A6231",
    "AutonomyInfrastructureAutonomyApiledgerexplanationA37A96F5",
    "AutonomyInfrastructureAutonomyApiledgerOPTIONS5EFD876F",
    "AutonomyInfrastructureAutonomyApiledger6BB426D0",
    "AutonomyInfrastructureAutonomyApiOPTIONS18CE20F2",
    "AutonomyInfrastructureAutonomyApireplayOPTIONS8E07CBDD",
    "AutonomyInfrastructureAutonomyApireplayPOST4956ED26",
    "AutonomyInfrastructureAutonomyApireplayA3AFB565",
    "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Deployment/Resource",
    "aws:cdk:do-not-refactor": true
   }
  },
  "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A": {
   "Type": "AWS::ApiGateway::Stage",
   "Properties": {
    "DeploymentId": {
     "Ref": "AutonomyInfrastructureAutonomyApiDeployment1C07CBFB02049d4aceac58e93b9c8ffb6166867b"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    },
    "StageName": "prod"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/DeploymentStage.prod/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiOPTIONS18CE20F2": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyApi709694A0",
      "RootResourceId"
     ]
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigC0C62407": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyApi709694A0",
      "RootResourceId"
     ]
    },
    "PathPart": "config",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigOPTIONSA0E7A2EF": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiconfigC0C62407"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigGETApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETconfig073DF5E8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/GET/config"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/GET/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..config"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigGETApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETconfigADCF9F2E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/GET/config"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/GET/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..config"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigGET7ABCC228": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiconfigC0C62407"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/GET/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigPUTApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7PUTconfigA763C296": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/PUT/config"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/PUT/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.PUT..config"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigPUTApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7PUTconfig8B2ED420": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/PUT/config"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/PUT/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.PUT..config"
   }
  },
  "AutonomyInfrastructureAutonomyApiconfigPUT2D49A097": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiconfigC0C62407"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/config/PUT/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApibudget86CAFB24": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyApi709694A0",
      "RootResourceId"
     ]
    },
    "PathPart": "budget",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetOPTIONS6F265644": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApibudget86CAFB24"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetGETApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETbudgetF8404E5A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/GET/budget"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/GET/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..budget"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetGETApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETbudget6A1B3502": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/GET/budget"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/GET/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..budget"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetGET7267797C": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApibudget86CAFB24"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/GET/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetPUTApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7PUTbudgetCF58DCAC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/PUT/budget"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/PUT/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.PUT..budget"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetPUTApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7PUTbudgetE60CB14F": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/PUT/budget"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/PUT/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.PUT..budget"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetPUT48D44B11": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApibudget86CAFB24"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/PUT/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetstateB1680FEC": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "AutonomyInfrastructureAutonomyApibudget86CAFB24"
    },
    "PathPart": "state",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/state/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetstateOPTIONS6AF71D30": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApibudgetstateB1680FEC"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/state/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetstateGETApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETbudgetstate1CF1456A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/GET/budget/state"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/state/GET/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..budget.state"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetstateGETApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETbudgetstateB6E8F8EE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/GET/budget/state"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/state/GET/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..budget.state"
   }
  },
  "AutonomyInfrastructureAutonomyApibudgetstateGET1693BFEA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApibudgetstateB1680FEC"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/budget/state/GET/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitches772DD280": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyApi709694A0",
      "RootResourceId"
     ]
    },
    "PathPart": "kill-switches",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitchesOPTIONSD5CEF4AD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApikillswitches772DD280"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitchesGETApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETkillswitches041A80E9": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/GET/kill-switches"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/GET/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..kill-switches"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitchesGETApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETkillswitchesB8EE0DC9": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/GET/kill-switches"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/GET/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..kill-switches"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitchesGET9274D3FB": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApikillswitches772DD280"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/GET/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitchesPUTApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7PUTkillswitches23C9D2E5": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/PUT/kill-switches"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/PUT/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.PUT..kill-switches"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitchesPUTApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7PUTkillswitchesF0073C49": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/PUT/kill-switches"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/PUT/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.PUT..kill-switches"
   }
  },
  "AutonomyInfrastructureAutonomyApikillswitchesPUT2E298081": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "PUT",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApikillswitches772DD280"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/kill-switches/PUT/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApireplayA3AFB565": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyApi709694A0",
      "RootResourceId"
     ]
    },
    "PathPart": "replay",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/replay/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApireplayOPTIONS8E07CBDD": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApireplayA3AFB565"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/replay/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApireplayPOSTApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7POSTreplay433FB88C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/POST/replay"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/replay/POST/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.POST..replay"
   }
  },
  "AutonomyInfrastructureAutonomyApireplayPOSTApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7POSTreplayDBEE229E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/POST/replay"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/replay/POST/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.POST..replay"
   }
  },
  "AutonomyInfrastructureAutonomyApireplayPOST4956ED26": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApireplayA3AFB565"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/replay/POST/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiledger6BB426D0": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyApi709694A0",
      "RootResourceId"
     ]
    },
    "PathPart": "ledger",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/ledger/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiledgerOPTIONS5EFD876F": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiledger6BB426D0"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/ledger/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiledgerexplanationA37A96F5": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "AutonomyInfrastructureAutonomyApiledger6BB426D0"
    },
    "PathPart": "explanation",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/ledger/explanation/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiledgerexplanationOPTIONS5E6A6231": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiledgerexplanationA37A96F5"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/ledger/explanation/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiledgerexplanationGETApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETledgerexplanationB81829EB": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/GET/ledger/explanation"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/ledger/explanation/GET/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..ledger.explanation"
   }
  },
  "AutonomyInfrastructureAutonomyApiledgerexplanationGETApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETledgerexplanation16115EF7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/GET/ledger/explanation"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/ledger/explanation/GET/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..ledger.explanation"
   }
  },
  "AutonomyInfrastructureAutonomyApiledgerexplanationGET45D7FA17": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiledgerexplanationA37A96F5"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/ledger/explanation/GET/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiaudit1CD6B5BB": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyApi709694A0",
      "RootResourceId"
     ]
    },
    "PathPart": "audit",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditOPTIONSB9D5C7A2": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiaudit1CD6B5BB"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexports3348E991": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "AutonomyInfrastructureAutonomyApiaudit1CD6B5BB"
    },
    "PathPart": "exports",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsOPTIONS1F808FCA": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiauditexports3348E991"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsPOSTApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7POSTauditexports63920941": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/POST/audit/exports"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/POST/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.POST..audit.exports"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsPOSTApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7POSTauditexports7D3B5066": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/POST/audit/exports"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/POST/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.POST..audit.exports"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsPOST89BA5DD0": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "POST",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiauditexports3348E991"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/POST/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsidE8384FD0": {
   "Type": "AWS::ApiGateway::Resource",
   "Properties": {
    "ParentId": {
     "Ref": "AutonomyInfrastructureAutonomyApiauditexports3348E991"
    },
    "PathPart": "{id}",
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/{id}/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsidOPTIONS520DDC28": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "ApiKeyRequired": false,
    "AuthorizationType": "NONE",
    "HttpMethod": "OPTIONS",
    "Integration": {
     "IntegrationResponses": [
      {
       "ResponseParameters": {
        "method.response.header.Access-Control-Allow-Headers": "'Content-Type,Authorization,X-Api-Key,X-Tenant-Id'",
        "method.response.header.Access-Control-Allow-Origin": "'*'",
        "method.response.header.Access-Control-Allow-Methods": "'GET,PUT,POST,OPTIONS'"
       },
       "StatusCode": "204"
      }
     ],
     "RequestTemplates": {
      "application/json": "{ statusCode: 200 }"
     },
     "Type": "MOCK"
    },
    "MethodResponses": [
     {
      "ResponseParameters": {
       "method.response.header.Access-Control-Allow-Headers": true,
       "method.response.header.Access-Control-Allow-Origin": true,
       "method.response.header.Access-Control-Allow-Methods": true
      },
      "StatusCode": "204"
     }
    ],
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiauditexportsidE8384FD0"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/{id}/OPTIONS/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsidGETApiPermissionCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETauditexportsidBE141CEA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/",
       {
        "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
       },
       "/GET/audit/exports/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/{id}/GET/ApiPermission.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..audit.exports.{id}"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsidGETApiPermissionTestCCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7GETauditexportsidC92904AE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:aws:execute-api:us-west-2:661268174397:",
       {
        "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
       },
       "/test-invoke-stage/GET/audit/exports/*"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/{id}/GET/ApiPermission.Test.CCNativeStackAutonomyInfrastructureAutonomyApiF6660AE7.GET..audit.exports.{id}"
   }
  },
  "AutonomyInfrastructureAutonomyApiauditexportsidGET2013A8E1": {
   "Type": "AWS::ApiGateway::Method",
   "Properties": {
    "AuthorizationType": "COGNITO_USER_POOLS",
    "AuthorizerId": {
     "Ref": "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044"
    },
    "HttpMethod": "GET",
    "Integration": {
     "IntegrationHttpMethod": "POST",
     "Type": "AWS_PROXY",
     "Uri": {
      "Fn::Join": [
       "",
       [
        "arn:aws:apigateway:us-west-2:lambda:path/2015-03-31/functions/",
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyAdminApiHandler4B6D2AAD",
          "Arn"
         ]
        },
        "/invocations"
       ]
      ]
     }
    },
    "ResourceId": {
     "Ref": "AutonomyInfrastructureAutonomyApiauditexportsidE8384FD0"
    },
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApi/Default/audit/exports/{id}/GET/Resource"
   }
  },
  "AutonomyInfrastructureAutonomyApiCognitoAuthorizerDAB05044": {
   "Type": "AWS::ApiGateway::Authorizer",
   "Properties": {
    "IdentitySource": "method.request.header.Authorization",
    "Name": "CCNativeStackAutonomyInfrastructureAutonomyApiCognitoAuthorizerEEE420F6",
    "ProviderARNs": [
     {
      "Fn::GetAtt": [
       "UserPool6BA7E5F2",
       "Arn"
      ]
     }
    ],
    "RestApiId": {
     "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
    },
    "Type": "COGNITO_USER_POOLS"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutonomyApiCognitoAuthorizer/Resource"
   }
  },
  "AutonomyInfrastructureAutoApprovalGateHandlerServiceRole1899710B": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutoApprovalGateHandler/ServiceRole/Resource"
   }
  },
  "AutonomyInfrastructureAutoApprovalGateHandlerServiceRoleDefaultPolicy7768B22F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyBudgetStateTableD25ABDF3",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAutonomyConfigTableB0A451FC",
          "Arn"
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "ActionIntentTable72DEAEAE",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "ActionIntentTable72DEAEAE",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AutonomyInfrastructureAutoApprovalGateHandlerServiceRoleDefaultPolicy7768B22F",
    "Roles": [
     {
      "Ref": "AutonomyInfrastructureAutoApprovalGateHandlerServiceRole1899710B"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutoApprovalGateHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AutonomyInfrastructureAutoApprovalGateHandlerFECE0F53": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "84af010d85dd3b1f224b0e50c65a25ecb6b8bd103750263f036b518a5ee1ffa2.zip"
    },
    "Environment": {
     "Variables": {
      "AUTONOMY_CONFIG_TABLE_NAME": {
       "Ref": "AutonomyInfrastructureAutonomyConfigTableB0A451FC"
      },
      "AUTONOMY_BUDGET_STATE_TABLE_NAME": {
       "Ref": "AutonomyInfrastructureAutonomyBudgetStateTableD25ABDF3"
      },
      "ACTION_INTENT_TABLE_NAME": {
       "Ref": "ActionIntentTable72DEAEAE"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      }
     }
    },
    "FunctionName": "cc-native-auto-approval-gate",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAutoApprovalGateHandlerServiceRole1899710B",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 30
   },
   "DependsOn": [
    "AutonomyInfrastructureAutoApprovalGateHandlerServiceRoleDefaultPolicy7768B22F",
    "AutonomyInfrastructureAutoApprovalGateHandlerServiceRole1899710B"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AutoApprovalGateHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AutonomyInfrastructureAuditExportWorkerHandlerServiceRole739BA09C": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportWorkerHandler/ServiceRole/Resource"
   }
  },
  "AutonomyInfrastructureAuditExportWorkerHandlerServiceRoleDefaultPolicy195B4DC3": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "AutonomyInfrastructureAuditExportTableE767D8B7",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AutonomyInfrastructureAuditExportBucket69E79BB1",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AutonomyInfrastructureAuditExportBucket69E79BB1",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "AutonomyInfrastructureAuditExportWorkerHandlerServiceRoleDefaultPolicy195B4DC3",
    "Roles": [
     {
      "Ref": "AutonomyInfrastructureAuditExportWorkerHandlerServiceRole739BA09C"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportWorkerHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "AutonomyInfrastructureAuditExportWorkerHandlerDB28BFAD": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "8d4c46be1a8abb4cfc1228311be42f49e970c6391ad570e2cc3408223f35f728.zip"
    },
    "Environment": {
     "Variables": {
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "AUDIT_EXPORT_TABLE_NAME": {
       "Ref": "AutonomyInfrastructureAuditExportTableE767D8B7"
      },
      "AUDIT_EXPORT_BUCKET_NAME": {
       "Ref": "AutonomyInfrastructureAuditExportBucket69E79BB1"
      }
     }
    },
    "FunctionName": "cc-native-audit-export-worker",
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAuditExportWorkerHandlerServiceRole739BA09C",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 300
   },
   "DependsOn": [
    "AutonomyInfrastructureAuditExportWorkerHandlerServiceRoleDefaultPolicy195B4DC3",
    "AutonomyInfrastructureAuditExportWorkerHandlerServiceRole739BA09C"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportWorkerHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "AutonomyInfrastructureAuditExportRequestedRuleF748FE0A": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.autonomy"
     ],
     "detail-type": [
      "AuditExportRequested"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "AutonomyInfrastructureAuditExportWorkerHandlerDB28BFAD",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportRequestedRule/Resource"
   }
  },
  "AutonomyInfrastructureAuditExportRequestedRuleAllowEventRuleCCNativeStackAutonomyInfrastructureAuditExportWorkerHandlerE816F92CA8C48B72": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAuditExportWorkerHandlerDB28BFAD",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "AutonomyInfrastructureAuditExportRequestedRuleF748FE0A",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/AutonomyInfrastructure/AuditExportRequestedRule/AllowEventRuleCCNativeStackAutonomyInfrastructureAuditExportWorkerHandlerE816F92C"
   }
  },
  "DecisionSchedulingInfrastructureDecisionRunStateTable903D6786": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-decision-run-state"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionRunStateTable/Resource"
   }
  },
  "DecisionSchedulingInfrastructureIdempotencyStoreTableD3467EE9": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-decision-idempotency-store",
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/IdempotencyStoreTable/Resource"
   }
  },
  "DecisionSchedulingInfrastructureDecisionCostGateHandlerServiceRoleA21A1B89": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionCostGateHandler/ServiceRole/Resource"
   }
  },
  "DecisionSchedulingInfrastructureDecisionCostGateHandlerServiceRoleDefaultPolicy90D90748": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "DecisionSchedulingInfrastructureDecisionRunStateTable903D6786",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "DecisionSchedulingInfrastructureIdempotencyStoreTableD3467EE9",
          "Arn"
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DecisionSchedulingInfrastructureDecisionCostGateHandlerServiceRoleDefaultPolicy90D90748",
    "Roles": [
     {
      "Ref": "DecisionSchedulingInfrastructureDecisionCostGateHandlerServiceRoleA21A1B89"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionCostGateHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DecisionSchedulingInfrastructureDecisionCostGateHandlerD710B9CB": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "a7e595a6b41aeed580bb761e2b0879062e3d9d3fb106406034e82ee88a09e27a.zip"
    },
    "Environment": {
     "Variables": {
      "DECISION_RUN_STATE_TABLE_NAME": {
       "Ref": "DecisionSchedulingInfrastructureDecisionRunStateTable903D6786"
      },
      "IDEMPOTENCY_STORE_TABLE_NAME": {
       "Ref": "DecisionSchedulingInfrastructureIdempotencyStoreTableD3467EE9"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      }
     }
    },
    "FunctionName": "cc-native-decision-cost-gate",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DecisionSchedulingInfrastructureDecisionCostGateHandlerServiceRoleA21A1B89",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 60
   },
   "DependsOn": [
    "DecisionSchedulingInfrastructureDecisionCostGateHandlerServiceRoleDefaultPolicy90D90748",
    "DecisionSchedulingInfrastructureDecisionCostGateHandlerServiceRoleA21A1B89"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionCostGateHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DecisionSchedulingInfrastructureDecisionSchedulerRole239E02E0": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "scheduler.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Description": "Role for EventBridge Scheduler to invoke decision cost gate Lambda"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionSchedulerRole/Resource"
   }
  },
  "DecisionSchedulingInfrastructureDecisionSchedulerRoleDefaultPolicyF8DB0149": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "lambda:InvokeFunction",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "DecisionSchedulingInfrastructureDecisionCostGateHandlerD710B9CB",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DecisionSchedulingInfrastructureDecisionCostGateHandlerD710B9CB",
             "Arn"
            ]
           },
           ":*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DecisionSchedulingInfrastructureDecisionSchedulerRoleDefaultPolicyF8DB0149",
    "Roles": [
     {
      "Ref": "DecisionSchedulingInfrastructureDecisionSchedulerRole239E02E0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionSchedulerRole/DefaultPolicy/Resource"
   }
  },
  "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerServiceRole14037155": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionDeferredRequeueHandler/ServiceRole/Resource"
   }
  },
  "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerServiceRoleDefaultPolicy6FAC9054": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "scheduler:CreateSchedule",
        "scheduler:DeleteSchedule",
        "scheduler:GetSchedule"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "iam:PassRole",
       "Condition": {
        "StringEquals": {
         "iam:PassedToService": "scheduler.amazonaws.com"
        }
       },
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DecisionSchedulingInfrastructureDecisionSchedulerRole239E02E0",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerServiceRoleDefaultPolicy6FAC9054",
    "Roles": [
     {
      "Ref": "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerServiceRole14037155"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionDeferredRequeueHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandler0554A09B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "d1b84585ecbab9401032409daff95daca8fb5439978699998be98cbf1d3dbab2.zip"
    },
    "Environment": {
     "Variables": {
      "DECISION_COST_GATE_HANDLER_ARN": {
       "Fn::GetAtt": [
        "DecisionSchedulingInfrastructureDecisionCostGateHandlerD710B9CB",
        "Arn"
       ]
      },
      "DECISION_SCHEDULER_ROLE_ARN": {
       "Fn::GetAtt": [
        "DecisionSchedulingInfrastructureDecisionSchedulerRole239E02E0",
        "Arn"
       ]
      },
      "SCHEDULE_GROUP_NAME": "default"
     }
    },
    "FunctionName": "cc-native-decision-deferred-requeue",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerServiceRole14037155",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 60
   },
   "DependsOn": [
    "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerServiceRoleDefaultPolicy6FAC9054",
    "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerServiceRole14037155"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/DecisionDeferredRequeueHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "DecisionSchedulingInfrastructureRunDecisionRule53E62145": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Route RUN_DECISION to cost gate handler (Phase 5.2)",
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native"
     ],
     "detail-type": [
      "RUN_DECISION"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "DecisionSchedulingInfrastructureDecisionCostGateHandlerD710B9CB",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/RunDecisionRule/Resource"
   }
  },
  "DecisionSchedulingInfrastructureRunDecisionRuleAllowEventRuleCCNativeStackDecisionSchedulingInfrastructureDecisionCostGateHandlerA6619AFE58D2C034": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionSchedulingInfrastructureDecisionCostGateHandlerD710B9CB",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "DecisionSchedulingInfrastructureRunDecisionRule53E62145",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/RunDecisionRule/AllowEventRuleCCNativeStackDecisionSchedulingInfrastructureDecisionCostGateHandlerA6619AFE"
   }
  },
  "DecisionSchedulingInfrastructureRunDecisionDeferredRule43D2C6CE": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Route RUN_DECISION_DEFERRED to requeue handler (Phase 5.2)",
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native"
     ],
     "detail-type": [
      "RUN_DECISION_DEFERRED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandler0554A09B",
        "Arn"
       ]
      },
      "Id": "Target0"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/RunDecisionDeferredRule/Resource"
   }
  },
  "DecisionSchedulingInfrastructureRunDecisionDeferredRuleAllowEventRuleCCNativeStackDecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerDE50097D6503A133": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DecisionSchedulingInfrastructureDecisionDeferredRequeueHandler0554A09B",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "DecisionSchedulingInfrastructureRunDecisionDeferredRule43D2C6CE",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/DecisionSchedulingInfrastructure/RunDecisionDeferredRule/AllowEventRuleCCNativeStackDecisionSchedulingInfrastructureDecisionDeferredRequeueHandlerDE50097D"
   }
  },
  "PerceptionSchedulerInfrastructurePerceptionSchedulerTable920E9628": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-perception-scheduler"
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/PerceptionSchedulerTable/Resource"
   }
  },
  "PerceptionSchedulerInfrastructurePullIdempotencyStoreTable7B26BB29": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "pk",
      "AttributeType": "S"
     },
     {
      "AttributeName": "sk",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "KeySchema": [
     {
      "AttributeName": "pk",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "sk",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "cc-native-pull-idempotency-store",
    "TimeToLiveSpecification": {
     "AttributeName": "ttl",
     "Enabled": true
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/PullIdempotencyStoreTable/Resource"
   }
  },
  "PerceptionSchedulerInfrastructureHeatScoringHandlerServiceRole7E7813A1": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/HeatScoringHandler/ServiceRole/Resource"
   }
  },
  "PerceptionSchedulerInfrastructureHeatScoringHandlerServiceRoleDefaultPolicy6C9BABF1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "PerceptionSchedulerInfrastructurePerceptionSchedulerTable920E9628",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountPostureStateTable",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "AccountPostureStateTable",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PerceptionSchedulerInfrastructureHeatScoringHandlerServiceRoleDefaultPolicy6C9BABF1",
    "Roles": [
     {
      "Ref": "PerceptionSchedulerInfrastructureHeatScoringHandlerServiceRole7E7813A1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/HeatScoringHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "PerceptionSchedulerInfrastructureHeatScoringHandler218F0305": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "67a0a76f56477ce7cabe673d8f802e9073fd13cb68bec3a8290935a4801538ef.zip"
    },
    "Environment": {
     "Variables": {
      "PERCEPTION_SCHEDULER_TABLE_NAME": {
       "Ref": "PerceptionSchedulerInfrastructurePerceptionSchedulerTable920E9628"
      },
      "ACCOUNT_POSTURE_STATE_TABLE_NAME": {
       "Ref": "AccountPostureStateTable"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      }
     }
    },
    "FunctionName": "cc-native-heat-scoring",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructureHeatScoringHandlerServiceRole7E7813A1",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 60
   },
   "DependsOn": [
    "PerceptionSchedulerInfrastructureHeatScoringHandlerServiceRoleDefaultPolicy6C9BABF1",
    "PerceptionSchedulerInfrastructureHeatScoringHandlerServiceRole7E7813A1"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/HeatScoringHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandlerServiceRoleC5B40CE6": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/PerceptionPullOrchestratorHandler/ServiceRole/Resource"
   }
  },
  "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandlerServiceRoleDefaultPolicy17EF9FDA": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "PerceptionSchedulerInfrastructurePerceptionSchedulerTable920E9628",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "PerceptionSchedulerInfrastructurePullIdempotencyStoreTable7B26BB29",
          "Arn"
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandlerServiceRoleDefaultPolicy17EF9FDA",
    "Roles": [
     {
      "Ref": "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandlerServiceRoleC5B40CE6"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/PerceptionPullOrchestratorHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandler10F319B8": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "d222a450f1a612770a692a1ee2b059aafdf534565ec05290d6fec318e510efff.zip"
    },
    "Environment": {
     "Variables": {
      "PERCEPTION_SCHEDULER_TABLE_NAME": {
       "Ref": "PerceptionSchedulerInfrastructurePerceptionSchedulerTable920E9628"
      },
      "PULL_IDEMPOTENCY_STORE_TABLE_NAME": {
       "Ref": "PerceptionSchedulerInfrastructurePullIdempotencyStoreTable7B26BB29"
      }
     }
    },
    "FunctionName": "cc-native-perception-pull-orchestrator",
    "Handler": "index.handler",
    "MemorySize": 256,
    "Role": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandlerServiceRoleC5B40CE6",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 60
   },
   "DependsOn": [
    "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandlerServiceRoleDefaultPolicy17EF9FDA",
    "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandlerServiceRoleC5B40CE6"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/PerceptionPullOrchestratorHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PerceptionSchedulerInfrastructureSignalDetectedHeatScoringRule2E3076CB": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Trigger heat scoring on signal arrival (Phase 5.3)",
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.perception"
     ],
     "detail-type": [
      "SIGNAL_DETECTED",
      "SIGNAL_CREATED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "PerceptionSchedulerInfrastructureHeatScoringHandler218F0305",
        "Arn"
       ]
      },
      "Id": "Target0",
      "InputPath": "$.detail"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/SignalDetectedHeatScoringRule/Resource"
   }
  },
  "PerceptionSchedulerInfrastructureSignalDetectedHeatScoringRuleAllowEventRuleCCNativeStackPerceptionSchedulerInfrastructureHeatScoringHandlerA426BA98126E22EC": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructureHeatScoringHandler218F0305",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructureSignalDetectedHeatScoringRule2E3076CB",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/SignalDetectedHeatScoringRule/AllowEventRuleCCNativeStackPerceptionSchedulerInfrastructureHeatScoringHandlerA426BA98"
   }
  },
  "PerceptionSchedulerInfrastructureHeatScoringScheduleRule9D3FE9CA": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Periodic heat scoring sweep (Phase 5.3)",
    "ScheduleExpression": "rate(1 hour)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "PerceptionSchedulerInfrastructureHeatScoringHandler218F0305",
        "Arn"
       ]
      },
      "Id": "Target0",
      "Input": "{\"tenantId\":\"\",\"accountIds\":[]}"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/HeatScoringScheduleRule/Resource"
   }
  },
  "PerceptionSchedulerInfrastructureHeatScoringScheduleRuleAllowEventRuleCCNativeStackPerceptionSchedulerInfrastructureHeatScoringHandlerA426BA9862047F8C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructureHeatScoringHandler218F0305",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructureHeatScoringScheduleRule9D3FE9CA",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/HeatScoringScheduleRule/AllowEventRuleCCNativeStackPerceptionSchedulerInfrastructureHeatScoringHandlerA426BA98"
   }
  },
  "PerceptionSchedulerInfrastructurePerceptionPullScheduleRuleC8C86EEB": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "Description": "Periodic perception pull orchestration (Phase 5.3)",
    "ScheduleExpression": "rate(1 hour)",
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandler10F319B8",
        "Arn"
       ]
      },
      "Id": "Target0",
      "Input": "{\"jobs\":[]}"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/PerceptionPullScheduleRule/Resource"
   }
  },
  "PerceptionSchedulerInfrastructurePerceptionPullScheduleRuleAllowEventRuleCCNativeStackPerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandler5138AAD66F324EE3": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandler10F319B8",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "PerceptionSchedulerInfrastructurePerceptionPullScheduleRuleC8C86EEB",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionSchedulerInfrastructure/PerceptionPullScheduleRule/AllowEventRuleCCNativeStackPerceptionSchedulerInfrastructurePerceptionPullOrchestratorHandler5138AAD6"
   }
  },
  "PerceptionHandlersConnectorPollDlq14318C64": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "cc-native-connector-poll-handler-dlq"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/ConnectorPollDlq/Resource"
   }
  },
  "PerceptionHandlersSignalDetectionDlqEC9EFCCF": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "cc-native-signal-detection-handler-dlq"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectionDlq/Resource"
   }
  },
  "PerceptionHandlersSignalDetectionDlqPolicy834340B6": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Condition": {
        "ArnEquals": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "PerceptionHandlersConnectorPollCompletedRule339EDE78",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "PerceptionHandlersSignalDetectionDlqEC9EFCCF",
         "Arn"
        ]
       },
       "Sid": "AllowEventRuleCCNativeStackPerceptionHandlersConnectorPollCompletedRule6585D47A"
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "PerceptionHandlersSignalDetectionDlqEC9EFCCF"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectionDlq/Policy/Resource"
   }
  },
  "PerceptionHandlersLifecycleInferenceDlq6448FBB8": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "MessageRetentionPeriod": 1209600,
    "QueueName": "cc-native-lifecycle-inference-handler-dlq"
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/LifecycleInferenceDlq/Resource"
   }
  },
  "PerceptionHandlersLifecycleInferenceDlqPolicy390C7857": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Condition": {
        "ArnEquals": {
         "aws:SourceArn": {
          "Fn::GetAtt": [
           "PerceptionHandlersSignalDetectedRule4DCF0A68",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "events.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "PerceptionHandlersLifecycleInferenceDlq6448FBB8",
         "Arn"
        ]
       },
       "Sid": "AllowEventRuleCCNativeStackPerceptionHandlersSignalDetectedRule1EF2B003"
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "PerceptionHandlersLifecycleInferenceDlq6448FBB8"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/LifecycleInferenceDlq/Policy/Resource"
   }
  },
  "PerceptionHandlersConnectorPollHandlerServiceRole81041944": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/ConnectorPollHandler/ServiceRole/Resource"
   }
  },
  "PerceptionHandlersConnectorPollHandlerServiceRoleDefaultPolicy4F818644": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "PerceptionHandlersConnectorPollDlq14318C64",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:Abort*",
        "s3:DeleteObject*",
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "EvidenceLedgerBucket3A5BFB25",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "EvidenceLedgerBucket3A5BFB25",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "EvidenceIndexTableCC0C8C88",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "EvidenceIndexTableCC0C8C88",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PerceptionHandlersConnectorPollHandlerServiceRoleDefaultPolicy4F818644",
    "Roles": [
     {
      "Ref": "PerceptionHandlersConnectorPollHandlerServiceRole81041944"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/ConnectorPollHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ConnectorPollHandler": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "e817edb026fdf06443f60a83b2a443bb1bc052934f61c2dfd96ef41942518354.zip"
    },
    "DeadLetterConfig": {
     "TargetArn": {
      "Fn::GetAtt": [
       "PerceptionHandlersConnectorPollDlq14318C64",
       "Arn"
      ]
     }
    },
    "Environment": {
     "Variables": {
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EVIDENCE_INDEX_TABLE_NAME": {
       "Ref": "EvidenceIndexTableCC0C8C88"
      },
      "EVIDENCE_LEDGER_BUCKET": {
       "Ref": "EvidenceLedgerBucket3A5BFB25"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      }
     }
    },
    "FunctionName": "cc-native-connector-poll-handler",
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "PerceptionHandlersConnectorPollHandlerServiceRole81041944",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 900
   },
   "DependsOn": [
    "PerceptionHandlersConnectorPollHandlerServiceRoleDefaultPolicy4F818644",
    "PerceptionHandlersConnectorPollHandlerServiceRole81041944"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/ConnectorPollHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PerceptionHandlersConnectorPollHandlerEventInvokeConfigA9A7C9F7": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "ConnectorPollHandler"
    },
    "MaximumRetryAttempts": 2,
    "Qualifier": "$LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/ConnectorPollHandler/EventInvokeConfig/Resource"
   }
  },
  "PerceptionHandlersSignalDetectionHandlerServiceRoleB8FA54A9": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectionHandler/ServiceRole/Resource"
   }
  },
  "PerceptionHandlersSignalDetectionHandlerServiceRoleDefaultPolicyBE3A145F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "PerceptionHandlersSignalDetectionDlqEC9EFCCF",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:GetBucket*",
        "s3:GetObject*",
        "s3:List*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "EvidenceLedgerBucket3A5BFB25",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "EvidenceLedgerBucket3A5BFB25",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "AccountsTable81C15AE5",
          "Arn"
         ]
        },
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PerceptionHandlersSignalDetectionHandlerServiceRoleDefaultPolicyBE3A145F",
    "Roles": [
     {
      "Ref": "PerceptionHandlersSignalDetectionHandlerServiceRoleB8FA54A9"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectionHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "SignalDetectionHandler": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "968e33ee76507eaf60271aef60f7bc2a1576704cb63e33f3dca55f10645b10b9.zip"
    },
    "DeadLetterConfig": {
     "TargetArn": {
      "Fn::GetAtt": [
       "PerceptionHandlersSignalDetectionDlqEC9EFCCF",
       "Arn"
      ]
     }
    },
    "Environment": {
     "Variables": {
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EVIDENCE_INDEX_TABLE_NAME": {
       "Ref": "EvidenceIndexTableCC0C8C88"
      },
      "EVIDENCE_LEDGER_BUCKET": {
       "Ref": "EvidenceLedgerBucket3A5BFB25"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      }
     }
    },
    "FunctionName": "cc-native-signal-detection-handler",
    "Handler": "index.handler",
    "MemorySize": 1024,
    "Role": {
     "Fn::GetAtt": [
      "PerceptionHandlersSignalDetectionHandlerServiceRoleB8FA54A9",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 900
   },
   "DependsOn": [
    "PerceptionHandlersSignalDetectionHandlerServiceRoleDefaultPolicyBE3A145F",
    "PerceptionHandlersSignalDetectionHandlerServiceRoleB8FA54A9"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectionHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PerceptionHandlersSignalDetectionHandlerEventInvokeConfig846FC90C": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "SignalDetectionHandler"
    },
    "MaximumRetryAttempts": 2,
    "Qualifier": "$LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectionHandler/EventInvokeConfig/Resource"
   }
  },
  "PerceptionHandlersLifecycleInferenceHandlerServiceRoleD091F351": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/LifecycleInferenceHandler/ServiceRole/Resource"
   }
  },
  "PerceptionHandlersLifecycleInferenceHandlerServiceRoleDefaultPolicy2147626F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "PerceptionHandlersLifecycleInferenceDlq6448FBB8",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:PutItem",
        "dynamodb:Query",
        "dynamodb:Scan",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "AccountsTable81C15AE5",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:ConditionCheckItem",
        "dynamodb:DescribeTable",
        "dynamodb:GetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "SignalsTableE8D63F6D",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "SignalsTableE8D63F6D",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchWriteItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "LedgerTable38A58B60",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LedgerTable38A58B60",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "events:PutEvents",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CCNativeEventBus892049F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "PerceptionHandlersLifecycleInferenceHandlerServiceRoleDefaultPolicy2147626F",
    "Roles": [
     {
      "Ref": "PerceptionHandlersLifecycleInferenceHandlerServiceRoleD091F351"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/LifecycleInferenceHandler/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LifecycleInferenceHandler": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-661268174397-us-west-2",
     "S3Key": "54c23d0738aeb8f5684e3ef2bacd68527ef857722564c96e5ee17fcf8d340c03.zip"
    },
    "DeadLetterConfig": {
     "TargetArn": {
      "Fn::GetAtt": [
       "PerceptionHandlersLifecycleInferenceDlq6448FBB8",
       "Arn"
      ]
     }
    },
    "Environment": {
     "Variables": {
      "ACCOUNTS_TABLE_NAME": {
       "Ref": "AccountsTable81C15AE5"
      },
      "SIGNALS_TABLE_NAME": {
       "Ref": "SignalsTableE8D63F6D"
      },
      "LEDGER_TABLE_NAME": {
       "Ref": "LedgerTable38A58B60"
      },
      "EVIDENCE_INDEX_TABLE_NAME": {
       "Ref": "EvidenceIndexTableCC0C8C88"
      },
      "EVIDENCE_LEDGER_BUCKET": {
       "Ref": "EvidenceLedgerBucket3A5BFB25"
      },
      "EVENT_BUS_NAME": {
       "Ref": "CCNativeEventBus892049F2"
      }
     }
    },
    "FunctionName": "cc-native-lifecycle-inference-handler",
    "Handler": "index.handler",
    "MemorySize": 512,
    "Role": {
     "Fn::GetAtt": [
      "PerceptionHandlersLifecycleInferenceHandlerServiceRoleD091F351",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Timeout": 300
   },
   "DependsOn": [
    "PerceptionHandlersLifecycleInferenceHandlerServiceRoleDefaultPolicy2147626F",
    "PerceptionHandlersLifecycleInferenceHandlerServiceRoleD091F351"
   ],
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/LifecycleInferenceHandler/Resource",
    "aws:asset:path": "/Users/rameshpaturu/Documents/projects/lambda/cc-native",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "PerceptionHandlersLifecycleInferenceHandlerEventInvokeConfigA9D00F52": {
   "Type": "AWS::Lambda::EventInvokeConfig",
   "Properties": {
    "FunctionName": {
     "Ref": "LifecycleInferenceHandler"
    },
    "MaximumRetryAttempts": 2,
    "Qualifier": "$LATEST"
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/LifecycleInferenceHandler/EventInvokeConfig/Resource"
   }
  },
  "PerceptionHandlersConnectorPollCompletedRule339EDE78": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.perception"
     ],
     "detail-type": [
      "CONNECTOR_POLL_COMPLETED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "SignalDetectionHandler",
        "Arn"
       ]
      },
      "DeadLetterConfig": {
       "Arn": {
        "Fn::GetAtt": [
         "PerceptionHandlersSignalDetectionDlqEC9EFCCF",
         "Arn"
        ]
       }
      },
      "Id": "Target0",
      "RetryPolicy": {
       "MaximumRetryAttempts": 2
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/ConnectorPollCompletedRule/Resource"
   }
  },
  "PerceptionHandlersConnectorPollCompletedRuleAllowEventRuleCCNativeStackPerceptionHandlersSignalDetectionHandler86A6DCFB606B8ED5": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "SignalDetectionHandler",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "PerceptionHandlersConnectorPollCompletedRule339EDE78",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/ConnectorPollCompletedRule/AllowEventRuleCCNativeStackPerceptionHandlersSignalDetectionHandler86A6DCFB"
   }
  },
  "PerceptionHandlersSignalDetectedRule4DCF0A68": {
   "Type": "AWS::Events::Rule",
   "Properties": {
    "EventBusName": {
     "Ref": "CCNativeEventBus892049F2"
    },
    "EventPattern": {
     "source": [
      "cc-native.perception"
     ],
     "detail-type": [
      "SIGNAL_DETECTED",
      "SIGNAL_CREATED"
     ]
    },
    "State": "ENABLED",
    "Targets": [
     {
      "Arn": {
       "Fn::GetAtt": [
        "LifecycleInferenceHandler",
        "Arn"
       ]
      },
      "DeadLetterConfig": {
       "Arn": {
        "Fn::GetAtt": [
         "PerceptionHandlersLifecycleInferenceDlq6448FBB8",
         "Arn"
        ]
       }
      },
      "Id": "Target0",
      "RetryPolicy": {
       "MaximumRetryAttempts": 2
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectedRule/Resource"
   }
  },
  "PerceptionHandlersSignalDetectedRuleAllowEventRuleCCNativeStackPerceptionHandlersLifecycleInferenceHandler109F8B97A730B0FE": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "LifecycleInferenceHandler",
      "Arn"
     ]
    },
    "Principal": "events.amazonaws.com",
    "SourceArn": {
     "Fn::GetAtt": [
      "PerceptionHandlersSignalDetectedRule4DCF0A68",
      "Arn"
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/PerceptionHandlers/SignalDetectedRule/AllowEventRuleCCNativeStackPerceptionHandlersLifecycleInferenceHandler109F8B97"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/31T224bIRD9lr4TmjhSpT7am4uspO3WTvwaYXa8IWaZLQO2XMS/V8B67TZRX3bOmTMLzG3CJ9df+OUnsacL2WwvtFrzsHRCbpnY00ugax5mXm7BsWpjBlRMjVrJw8k98EJmgiCy5mBEh82ahyex1pBiM4gMdmAc8XCb7MxTkka88CU22ci2HfHwAPmmBzhEpkTHwwKHmGRPTykoMomtUQ55eCawNaJO4oiPoNIKjDuXiicykBMeVr1M2qquWG3VTjhY+rUppTihBXoHY37Ff/JNiVAq4RQadqdx/4htCjvCJUhvlTvcW/R9/v+/jrlpLRC9898W99w4sBshYdXLW9P0qEp2q7oa6b1wsBeHs4jINLbEwyO2460j/gbOKnmntAObhHMemYHeeQM8VBtzMyu5j2fczCrtyYGthRUdOLDvpULmhpwwEiKjX8TDTw8+F7OA/D21+IxGpkW3bsSLwQbeiH/P5s4bmetN1y+CCBzxaTJDcH7sGJOHbm52uIUKzUa14yT+66zBdopIoYmMDPHwhL3KA5JBZFKjb/bCyVceplrYLmkZRCZ61ZbC87AActNe5dkZ4A30Gg/dMIxnbOlEW+YqgwUQeishrVdqzSs2Q1MSOqrDyQMum3AccJp694pW/S61P2PTXg1bNqBnEi3UWpiyIB+RtI/x7F5PDruPn/GXVFvcqQZsziM3J+WnTC70D+9674ak5Tay1F3+Rp93k0t+9ZVffXojpS6sN051wBfF/gFTdaoPygQAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "CCNativeStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "DecisionInfrastructureDecisionApiEndpoint73DCA32F": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
      },
      ".execute-api.us-west-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
      },
      "/"
     ]
    ]
   }
  },
  "ExecutionStatusApiEndpointA9087346": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "ExecutionStatusApi2E7AA195"
      },
      ".execute-api.us-west-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "ExecutionStatusApiDeploymentStageprod80307D0F"
      },
      "/"
     ]
    ]
   }
  },
  "AutonomyInfrastructureAutonomyApiEndpointDB651C20": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
      },
      ".execute-api.us-west-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
      },
      "/"
     ]
    ]
   }
  },
  "EvidenceLedgerBucketName": {
   "Description": "S3 bucket for evidence ledger (versioned, World Model truth)",
   "Value": {
    "Ref": "EvidenceLedgerBucket3A5BFB25"
   }
  },
  "WorldStateSnapshotsBucketName": {
   "Description": "S3 bucket for world state snapshots (versioned)",
   "Value": {
    "Ref": "WorldStateSnapshotsBucket7B77A435"
   }
  },
  "SchemaRegistryBucketName": {
   "Description": "S3 bucket for schema registry definitions (versioned)",
   "Value": {
    "Ref": "SchemaRegistryBucketAD895CE8"
   }
  },
  "ArtifactsBucketName": {
   "Description": "S3 bucket for artifacts (briefs, summaries, etc.)",
   "Value": {
    "Ref": "ArtifactsBucket2AAC5544"
   }
  },
  "LedgerArchivesBucketName": {
   "Description": "S3 bucket for execution ledger archives",
   "Value": {
    "Ref": "LedgerArchivesBucket5FE74194"
   }
  },
  "EventBusName": {
   "Description": "EventBridge custom event bus name",
   "Value": {
    "Ref": "CCNativeEventBus892049F2"
   }
  },
  "WorldStateTableName": {
   "Description": "DynamoDB table for computed world state (belief layer)",
   "Value": {
    "Ref": "WorldStateTableD92FBF82"
   }
  },
  "EvidenceIndexTableName": {
   "Description": "DynamoDB table for evidence index (points to S3 evidence)",
   "Value": {
    "Ref": "EvidenceIndexTableCC0C8C88"
   }
  },
  "SnapshotsIndexTableName": {
   "Description": "DynamoDB table for snapshots index (points to S3 snapshots)",
   "Value": {
    "Ref": "SnapshotsIndexTable28F25CBB"
   }
  },
  "SchemaRegistryTableName": {
   "Description": "DynamoDB table for schema registry index",
   "Value": {
    "Ref": "SchemaRegistryTableD1184F6E"
   }
  },
  "CriticalFieldRegistryTableName": {
   "Description": "DynamoDB table for critical field registry",
   "Value": {
    "Ref": "CriticalFieldRegistryTable5513C5F7"
   }
  },
  "LedgerTableName": {
   "Description": "DynamoDB table for execution ledger (append-only audit trail)",
   "Value": {
    "Ref": "LedgerTable38A58B60"
   }
  },
  "CacheTableName": {
   "Description": "DynamoDB table for TTL-based cache",
   "Value": {
    "Ref": "CacheTableC1E6DF7E"
   }
  },
  "TenantsTableName": {
   "Description": "DynamoDB table for tenant configuration and metadata",
   "Value": {
    "Ref": "TenantsTableB701DC57"
   }
  },
  "AccountsTableName": {
   "Description": "DynamoDB table for account metadata",
   "Value": {
    "Ref": "AccountsTable81C15AE5"
   }
  },
  "SignalsTableName": {
   "Description": "DynamoDB table for signals",
   "Value": {
    "Ref": "SignalsTableE8D63F6D"
   }
  },
  "MethodologyTableName": {
   "Description": "DynamoDB table for methodology definitions",
   "Value": {
    "Ref": "MethodologyTable8F16BBDE"
   }
  },
  "AssessmentTableName": {
   "Description": "DynamoDB table for methodology assessments",
   "Value": {
    "Ref": "AssessmentTable25EB317A"
   }
  },
  "IdentitiesTableName": {
   "Description": "DynamoDB table for user and agent identities",
   "Value": {
    "Ref": "IdentitiesTableCD62DAD4"
   }
  },
  "AgentRoleArn": {
   "Description": "IAM role ARN for autonomous agents (read-only access)",
   "Value": {
    "Fn::GetAtt": [
     "AgentRoleF4A42D6B",
     "Arn"
    ]
   }
  },
  "UserPoolId": {
   "Description": "Cognito User Pool ID for user authentication",
   "Value": {
    "Ref": "UserPool6BA7E5F2"
   }
  },
  "UserPoolClientId": {
   "Description": "Cognito User Pool Client ID",
   "Value": {
    "Ref": "UserPoolWebClient4C9370B0"
   }
  },
  "NeptuneClusterEndpoint": {
   "Description": "Neptune cluster endpoint (Gremlin)",
   "Value": {
    "Fn::GetAtt": [
     "NeptuneInfrastructureNeptuneCluster6F50D8EC",
     "Endpoint"
    ]
   }
  },
  "NeptuneClusterPort": {
   "Description": "Neptune cluster port (Gremlin)",
   "Value": {
    "Fn::GetAtt": [
     "NeptuneInfrastructureNeptuneCluster6F50D8EC",
     "Port"
    ]
   }
  },
  "NeptuneClusterIdentifier": {
   "Description": "Neptune cluster identifier",
   "Value": {
    "Ref": "NeptuneInfrastructureNeptuneCluster6F50D8EC"
   }
  },
  "NeptuneAccessRoleArn": {
   "Description": "IAM role ARN for accessing Neptune cluster",
   "Value": {
    "Fn::GetAtt": [
     "NeptuneInfrastructureNeptuneAccessRole3BE029B3",
     "Arn"
    ]
   }
  },
  "VpcId": {
   "Description": "VPC ID for Neptune cluster",
   "Value": {
    "Ref": "NeptuneInfrastructureCCNativeVpc9CABA391"
   }
  },
  "NeptuneSubnetIds": {
   "Description": "Comma-separated list of Neptune subnet IDs (for test runner setup)",
   "Value": {
    "Fn::Join": [
     "",
     [
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
      },
      ",",
      {
       "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet2SubnetD9369810"
      }
     ]
    ]
   }
  },
  "NeptuneSubnetId": {
   "Description": "First Neptune subnet ID (for test runner setup)",
   "Value": {
    "Ref": "NeptuneInfrastructureCCNativeVpcNeptuneIsolatedSubnet1SubnetA7BEE99D"
   }
  },
  "ConnectorPollHandlerArn": {
   "Description": "ARN of connector poll handler Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "ConnectorPollHandler",
     "Arn"
    ]
   }
  },
  "SignalDetectionHandlerArn": {
   "Description": "ARN of signal detection handler Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "SignalDetectionHandler",
     "Arn"
    ]
   }
  },
  "LifecycleInferenceHandlerArn": {
   "Description": "ARN of lifecycle inference handler Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "LifecycleInferenceHandler",
     "Arn"
    ]
   }
  },
  "GraphMaterializerHandlerArn": {
   "Description": "ARN of graph materializer handler Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "GraphMaterializerHandler",
     "Arn"
    ]
   }
  },
  "SynthesisEngineHandlerArn": {
   "Description": "ARN of synthesis engine handler Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "SynthesisEngineHandler",
     "Arn"
    ]
   }
  },
  "AccountPostureStateTableName": {
   "Description": "DynamoDB table for account posture state read model",
   "Value": {
    "Ref": "AccountPostureStateTable"
   }
  },
  "GraphMaterializationStatusTableName": {
   "Description": "DynamoDB table for graph materialization status (synthesis gating)",
   "Value": {
    "Ref": "GraphMaterializationStatusTable"
   }
  },
  "DecisionBudgetTableName": {
   "Description": "DynamoDB table for decision cost budgets",
   "Value": {
    "Ref": "DecisionBudgetTable24B12A3D"
   }
  },
  "ActionIntentTableName": {
   "Description": "DynamoDB table for action intents (approved actions)",
   "Value": {
    "Ref": "ActionIntentTable72DEAEAE"
   }
  },
  "DecisionProposalTableName": {
   "Description": "DynamoDB table for decision proposals (authoritative storage)",
   "Value": {
    "Ref": "DecisionProposalTable5A1A6F51"
   }
  },
  "DecisionEvaluationHandlerArn": {
   "Description": "ARN of decision evaluation handler Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "DecisionInfrastructureDecisionEvaluationHandler8D3F092E",
     "Arn"
    ]
   }
  },
  "DecisionTriggerHandlerArn": {
   "Description": "ARN of decision trigger handler Lambda function",
   "Value": {
    "Fn::GetAtt": [
     "DecisionInfrastructureDecisionTriggerHandler2F0CD40A",
     "Arn"
    ]
   }
  },
  "DecisionApiUrl": {
   "Description": "API Gateway URL for decision API",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "DecisionInfrastructureDecisionApiE67E0AE4"
      },
      ".execute-api.us-west-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "DecisionInfrastructureDecisionApiDeploymentStageprod3AF0F7F3"
      },
      "/"
     ]
    ]
   }
  },
  "DecisionApiKeyId": {
   "Description": "API Key ID for Decision API (use AWS CLI to retrieve key value)",
   "Value": {
    "Ref": "DecisionInfrastructureDecisionApiKey4D053422"
   }
  },
  "BudgetResetHandlerArn": {
   "Description": "ARN of budget reset handler Lambda function (scheduled daily at midnight UTC)",
   "Value": {
    "Fn::GetAtt": [
     "DecisionInfrastructureBudgetResetHandlerBD838B1E",
     "Arn"
    ]
   }
  },
  "ExecutionStatusApiUrl": {
   "Description": "API Gateway URL for execution status API (JWT auth: GET /executions/{id}/status, GET /accounts/{id}/executions)",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "ExecutionStatusApi2E7AA195"
      },
      ".execute-api.us-west-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "ExecutionStatusApiDeploymentStageprod80307D0F"
      },
      "/"
     ]
    ]
   }
  },
  "AutonomyApiUrl": {
   "Description": "API Gateway URL for autonomy admin API (Phase 5.1: GET/PUT /config, GET/PUT /budget, GET /budget/state)",
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "AutonomyInfrastructureAutonomyApi709694A0"
      },
      ".execute-api.us-west-2.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/",
      {
       "Ref": "AutonomyInfrastructureAutonomyApiDeploymentStageprod4962370A"
      },
      "/"
     ]
    ]
   }
  },
  "ActionTypeRegistryTableName": {
   "Description": "DynamoDB table for action type registry (tool mappings)",
   "Value": {
    "Fn::GetAtt": [
     "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
     "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureActionTypeRegistryTableF54D0F46Ref"
    ]
   }
  },
  "ExecutionAttemptsTableName": {
   "Description": "DynamoDB table for execution attempts",
   "Value": {
    "Fn::GetAtt": [
     "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
     "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionAttemptsTableF3C0C258Ref"
    ]
   }
  },
  "ExecutionOutcomesTableName": {
   "Description": "DynamoDB table for execution outcomes",
   "Value": {
    "Fn::GetAtt": [
     "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
     "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExecutionOutcomesTableD8F81003Ref"
    ]
   }
  },
  "ExternalWriteDedupeTableName": {
   "Description": "DynamoDB table for external write deduplication",
   "Value": {
    "Fn::GetAtt": [
     "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
     "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureExternalWriteDedupeTable43FF3055Ref"
    ]
   }
  },
  "ConnectorConfigTableName": {
   "Description": "DynamoDB table for connector configuration",
   "Value": {
    "Fn::GetAtt": [
     "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
     "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureConnectorConfigTableAB947209Ref"
    ]
   }
  },
  "InternalNotesTableName": {
   "Description": "DynamoDB table for internal notes",
   "Value": {
    "Fn::GetAtt": [
     "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
     "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureInternalNotesTable810F7240Ref"
    ]
   }
  },
  "InternalTasksTableName": {
   "Description": "DynamoDB table for internal tasks",
   "Value": {
    "Fn::GetAtt": [
     "ExecutionInfrastructureNestedStackNestedStackExecutionInfrastructureNestedStackNestedStackResource65F6CDCB",
     "Outputs.CCNativeStackExecutionInfrastructureNestedStackExecutionInfrastructureInternalTasksTableC558E248Ref"
    ]
   }
  },
  "DecisionRunStateTableName": {
   "Description": "DynamoDB table for decision run state (debounce/cooldown)",
   "Value": {
    "Ref": "DecisionSchedulingInfrastructureDecisionRunStateTable903D6786"
   }
  },
  "IdempotencyStoreTableName": {
   "Description": "DynamoDB table for RUN_DECISION idempotency",
   "Value": {
    "Ref": "DecisionSchedulingInfrastructureIdempotencyStoreTableD3467EE9"
   }
  },
  "PerceptionSchedulerTableName": {
   "Description": "DynamoDB table for perception heat and pull budget (Phase 5.3)",
   "Value": {
    "Ref": "PerceptionSchedulerInfrastructurePerceptionSchedulerTable920E9628"
   }
  },
  "PullIdempotencyStoreTableName": {
   "Description": "DynamoDB table for pull job idempotency (Phase 5.3)",
   "Value": {
    "Ref": "PerceptionSchedulerInfrastructurePullIdempotencyStoreTable7B26BB29"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}